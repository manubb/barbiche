<!DOCTYPE html>
<html>
<head>
	<title>Simple Barbiche examples</title>
	<meta charset="utf-8">
	<script type="text/javascript" src="https://cdn.rawgit.com/manubb/barbiche/25eba68f/examples/js/polyfill.min.js"></script>
	<script type="text/javascript" src="https://cdn.rawgit.com/manubb/barbiche/25eba68f/barbiche.js"></script>
</head>
<body>
	<template id="test">
		<div bb-class="[true: customClass]">
			<ul bb-attr="[my_replace(attrValue): 'myAttr']">
				<template bb-repeat="[items: 'item']">
					<li bb-if="item.show" bb-class="[true: item.species || 'unknown', _item_ <= 1: 'first']">{{item.name}} (index: {{_item_}})</li>
				</template>
			</ul>
			<span>{{item.join(', ').toUpperCase()}}</span>
			{{{some_html}}}
		</div>
	</template>
	<template id="simple-subtemplate">
		<div>
			<template bb-import="'sub'"></template>
		</div>
	</template>
	<template id="sub">
		<span>I am a subtemplate!</span>
	</template>
	<template id="dynamic-subtemplate">
		<div>
			<template bb-repeat="[items: 'item']" bb-import="item"></template>
		</div>
	</template>
	<template id="sub1">
		<span>I am subtemplate1!</span>
	</template>
	<template id="sub2">
		<span>I am subtemplate2!</span>
	</template>
	<template id="recursive">
		<template bb-if="children.length" bb-import="'recursive-sub'"></template>
	</template>
	<template id="recursive-sub">
		<ul>
			<li bb-repeat="[children: 'child']">{{child.name}}
				<template bb-if="child.children" bb-alias="[child.children: 'children']" bb-import="'recursive-sub'"></template>
			</li>
		</ul>
	</template>
	<script>
		document.addEventListener('DOMContentLoaded', function() {
			document.body.appendChild(Barbiche('test').merge({
				"customClass": "list",
				"items": [
					{species: "hen", name: "Elsa", show: true},
					{species: "cat", name: "Jacynthe", show: false},
					{species: null, name: "Zaza", show: true}
				],
				item: ["hen", "cat", "dog", "spider"],
		    some_html: "<div><p>This is...</p><p>...some HTML.</p></div>",
		   	my_replace: function(str) {return str.replace(/o/g, "O");},
				attrValue: "poipoi"
			}));
			document.body.appendChild(Barbiche('simple-subtemplate').merge());
			document.body.appendChild(Barbiche('dynamic-subtemplate').merge({
				items: ['sub2', 'sub1']
			}));
			document.body.appendChild(Barbiche('recursive').merge({
				children: [
					{
						name: "Solomon",
						children: [
							{
								name : "Lexie",
								children: [
									{
										name: "Shavon",
										children: [
											{
												name : "Shirleen"
											}, {
												name : "Kathleen"
											}
										]
									},
									{
										name: "Travis"
									},
									{
										name: "Adele"
									},
									{
										name: "Barney"
									}
								]
							}, {
								name : "Allie"
							}
						]
					}, {
						name: "Juliann",
						children: [
							{
								name : "Guy"
							}, {
								name : "Yaeko"
							}
						]
					}
				]
			}));
		});
	</script>
</body>
</html>
