!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.Barbiche=t()}}(function(){return function t(e,r,n){function i(o,a){if(!r[o]){if(!e[o]){var c="function"==typeof require&&require;if(!a&&c)return c(o,!0);if(s)return s(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var u=r[o]={exports:{}};e[o][0].call(u.exports,function(t){var r=e[o][1][t];return i(r?r:t)},u,u.exports,t,e,r,n)}return r[o].exports}for(var s="function"==typeof require&&require,o=0;o<n.length;o++)i(n[o]);return i}({1:[function(t,e,r){var n=function(){function t(t,e){Object.defineProperty(this,"name",{enumerable:!1,writable:!1,value:"JisonParserError"}),null==t&&(t="???"),Object.defineProperty(this,"message",{enumerable:!1,writable:!0,value:t}),this.hash=e;var r;if(e&&e.exception instanceof Error){var n=e.exception;this.message=n.message||t,r=n.stack}r||(Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,this.constructor):r=new Error(t).stack),r&&Object.defineProperty(this,"stack",{enumerable:!1,writable:!1,value:r})}function e(t,e,r){r=r||0;for(var n=0;n<e;n++)this.push(t),t+=r}function r(t,e){for(t=this.length-t,e+=t;t<e;t++)this.push(this[t])}function n(t){for(var e=[],r=0,n=t.length;r<n;r++){var i=t[r];"function"==typeof i?(r++,i.apply(e,t[r])):e.push(i)}return e}function i(t){return String.fromCharCode(parseInt(t,16))}function s(){return arguments[1]?P[arguments[1]]:i(arguments[2]||arguments[3])}function o(t){return t.replace(I,s)}function a(t,e){return t()||e()}function c(t,e){return t()&&e()}function l(t,e){return t()==e()}function u(t,e){return t()!=e()}function h(t,e){return t()<=e()}function f(t,e){return t()<e()}function p(t,e){return t()>=e()}function y(t,e){return t()>e()}function d(t){return!t()}function _(){return[]}function b(t){return[t()]}function m(t,e){var r=t();return r.push(e()),r}function v(t,e){var r=t();if(null!=r){var n=r[e()];return"function"==typeof n?n.bind(r):n}}function g(t,e){return t().apply(null,e())}function E(t,e){return new this.BBObj(t(),e())}function x(t,e){return t()+e()}function k(t,e){var r=t();return r._order=e,r}function A(){return!0}function S(){return!1}function N(){return null}function O(){}function R(){this.yy={}}"function"==typeof Object.setPrototypeOf?Object.setPrototypeOf(t.prototype,Error.prototype):t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t.prototype.name="JisonParserError";var w={trace:function(){},JisonParserError:t,yy:{},options:{type:"lalr",hasPartialLrUpgradeOnConflict:!0,errorRecoveryTokenDiscardCount:3},symbols_:{"!":10,"!=":19,$accept:0,$end:1,"&&":17,"(":11,")":12,"+":9,"++":15,",":3,"--":14,".":13,":":6,"<":7,"<=":20,"==":18,">":8,">=":21,ArgumentList:35,Arguments:34,Array:32,ArrayItemList:30,EOF:1,FALSE:26,IDENTIFIER:24,Main:29,NULL:28,NUMBER:22,Order:31,PropertyName:36,STRING:23,SimpleExpression:33,TRUE:25,UNDEFINED:27,"[":4,"]":5,error:2,"||":16},terminals_:{1:"EOF",2:"error",3:",",4:"[",5:"]",6:":",7:"<",8:">",9:"+",10:"!",11:"(",12:")",13:".",14:"--",15:"++",16:"||",17:"&&",18:"==",19:"!=",20:"<=",21:">=",22:"NUMBER",23:"STRING",24:"IDENTIFIER",25:"TRUE",26:"FALSE",27:"UNDEFINED",28:"NULL"},TERROR:2,EOF:1,originalQuoteName:null,originalParseError:null,cleanupAfterParse:null,constructParseErrorInfo:null,__reentrant_call_depth:0,__error_infos:[],quoteName:function(t){return'"'+t+'"'},describeSymbol:function(t){if(t!==this.EOF&&this.terminal_descriptions_&&this.terminal_descriptions_[t])return this.terminal_descriptions_[t];if(t===this.EOF)return"end of input";if(this.terminals_[t])return this.quoteName(this.terminals_[t]);var e=this.symbols_;for(var r in e)if(e[r]===t)return r;return null},collect_expected_token_set:function(t,e){var r=this.TERROR,n=[],i={};if(!e&&this.state_descriptions_&&this.state_descriptions_[t])return[this.state_descriptions_[t]];for(var s in this.table[t])if((s=+s)!==r){var o=e?s:this.describeSymbol(s);o&&!i[o]&&(n.push(o),i[o]=!0)}return n},productions_:function(t){for(var e=[],r=t.pop,n=t.rule,i=0,s=r.length;i<s;i++)e.push([r[i],n[i]]);return e}({pop:n([29,29,30,30,31,31,32,32,e,[33,23],34,34,35,35,36]),rule:n([2,3,1,3,1,1,2,e,[3,11],2,3,2,4,r,[19,3],e,[1,6],r,[31,5]])}),performAction:function(t,e,r,n){var i=this.yy;switch(e){case 1:return n[r-1];case 2:return k.bind(null,n[r-2],n[r-1]);case 3:case 34:this.$=b.bind(null,n[r]);break;case 4:case 35:this.$=m.bind(null,n[r-2],n[r]);break;case 5:this.$="after";break;case 6:this.$="before";break;case 7:case 32:this.$=_;break;case 8:case 20:case 33:this.$=n[r-1];break;case 9:this.$=E.bind(i,n[r-2],n[r]);break;case 10:this.$=a.bind(null,n[r-2],n[r]);break;case 11:this.$=c.bind(null,n[r-2],n[r]);break;case 12:this.$=l.bind(null,n[r-2],n[r]);break;case 13:this.$=u.bind(null,n[r-2],n[r]);break;case 14:this.$=h.bind(null,n[r-2],n[r]);break;case 15:this.$=p.bind(null,n[r-2],n[r]);break;case 16:this.$=f.bind(null,n[r-2],n[r]);break;case 17:this.$=y.bind(null,n[r-2],n[r]);break;case 18:this.$=x.bind(null,n[r-2],n[r]);break;case 19:this.$=d.bind(null,n[r]);break;case 21:this.$=g.bind(null,n[r-1],n[r]);break;case 22:this.$=v.bind(null,n[r-3],n[r-1]);break;case 23:this.$=v.bind(null,n[r-2],n[r]);break;case 24:this.$=n[r];break;case 25:var s=Number(t);this.$=function(){return s};break;case 26:case 36:this.$=function(){return t};break;case 27:this.$=i.context.resolve.bind(i.context,t);break;case 28:this.$=A;break;case 29:this.$=S;break;case 30:this.$=O;break;case 31:this.$=N}},table:function(t){for(var e=[],r=t.len,n=t.symbol,i=t.type,s=t.state,o=t.mode,a=t.goto,c=0,l=r.length;c<l;c++){for(var u=r[c],h={},f=0;f<u;f++){var p=n.shift();switch(i.shift()){case 2:h[p]=[o.shift(),a.shift()];break;case 0:h[p]=s.shift();break;default:h[p]=[3]}}e.push(h)}return e}({len:n([13,1,18,12,12,e,[0,8],14,0,1,e,[12,10],0,12,2,r,[18,3],20,15,0,2,16,0,e,[20,10],15,e,[0,3],r,[17,3],0,r,[52,3],12,16,16]),symbol:n([4,10,11,e,[22,8,1],32,33,1,1,4,e,[6,4,1],11,e,[13,9,1],31,34,r,[32,10],32,33,r,[12,13],5,r,[13,9],30,r,[57,3],r,[39,25],r,[12,107],24,36,r,[14,3],12,r,[15,9],35,1,e,[3,7,1],e,[11,11,1],34,r,[224,6],12,13,r,[15,7],3,5,r,[36,8],r,[18,8],r,[53,20],r,[20,180],r,[215,15],3,12,3,r,[251,15],r,[326,24],r,[273,16],r,[56,16]]),type:n([e,[2,10],e,[0,3],1,e,[2,16],0,0,r,[12,34],r,[57,4],r,[51,47],r,[12,87],r,[149,26],r,[22,9],r,[15,29],r,[18,21],r,[20,197],r,[233,29],r,[473,25],r,[58,20],0]),state:n([1,5,2,15,26,5,32,5,33,35,5,36,5,38,5,39,5,40,5,41,5,42,5,43,5,44,5,45,5,46,5,47,5,48,49,5,53,52,e,[26,15],5,60,5,61,26,26]),mode:n([e,[1,180],2,2,r,[3,3],e,[2,3],1,r,[8,7],r,[11,4],r,[35,16],r,[28,3],r,[50,16],r,[24,7],r,[25,7],r,[19,13],r,[20,6],r,[19,14],r,[10,6],r,[19,14],r,[12,4],r,[19,24],r,[9,5],r,[145,9],r,[19,64],r,[221,30],r,[7,12],r,[291,22],r,[256,15],r,[50,14]]),goto:n([13,3,4,e,[6,7,1],14,27,16,23,24,25,31,28,29,30,e,[17,6,1],r,[26,10],r,[10,11],34,r,[11,9],37,r,[32,21],r,[10,89],50,r,[11,3],51,r,[12,7],19,19,27,e,[19,5],31,19,28,e,[19,8],r,[188,6],54,28,r,[187,6],56,55,3,27,3,r,[206,6],r,[17,6],9,9,27,9,9,r,[16,4],9,28,9,9,r,[19,6],10,10,27,10,10,r,[19,4],10,28,e,[10,3],r,[19,5],11,11,27,11,11,r,[19,4],11,28,e,[11,4],r,[19,4],12,12,27,12,12,r,[19,4],12,28,e,[12,6],r,[280,3],13,27,13,13,r,[19,4],13,28,e,[13,6],21,22,14,14,27,e,[14,4],25,31,14,28,e,[14,8],15,15,27,e,[15,4],25,31,15,28,e,[15,8],16,16,27,e,[16,4],25,31,16,28,e,[16,8],17,17,27,e,[17,4],25,31,17,28,e,[17,8],18,18,27,e,[18,5],31,18,28,e,[18,8],27,57,r,[204,12],59,58,34,r,[238,6],34,r,[17,7],r,[303,20],4,27,4,r,[52,12],35,r,[50,6],35,r,[15,7]])}),defaultActions:function(t){for(var e={},r=t.idx,n=t.goto,i=0,s=r.length;i<s;i++){e[r[i]]=n[i]}return e}({idx:n([e,[5,8,1],14,26,29,30,34,37,49,50,51,54,55,57,58]),goto:n([e,[24,8,1],1,21,5,6,7,2,23,36,32,20,8,22,33])}),parseError:function(t,e,r){if(!e.recoverable)throw new r(t,e);this.trace(t),e.destroy()},parse:function(t){var e,r=this,n=new Array(128),i=new Array(128),s=new Array(128),o=this.table,a=0,c=(this.TERROR,this.EOF),l=(this.options.errorRecoveryTokenDiscardCount,[0,o.length]);e=this.__lexer__?this.__lexer__:this.__lexer__=Object.create(this.lexer);var u={parseError:null,quoteName:null,lexer:null,parser:null,pre_parse:null,post_parse:null};for(var h in this.yy)Object.prototype.hasOwnProperty.call(this.yy,h)&&(u[h]=this.yy[h]);u.lexer=e,u.parser=this,e.setInput(t,u),s[a]=null,i[a]=0,n[a]=0,++a,void 0===e.yytext&&(e.yytext="");var f=e.yytext;void 0===e.yylineno&&(e.yylineno=0),"function"==typeof u.parseError?this.parseError=function(t,e,r){return u.parseError(t,e,r)}:this.parseError=this.originalParseError,"function"==typeof u.quoteName?this.quoteName=u.quoteName:this.quoteName=this.originalQuoteName,this.cleanupAfterParse=function(t,r,o){var c;if(r&&(u.post_parse&&void 0!==(c=u.post_parse.call(this,u,t))&&(t=c),this.post_parse&&void 0!==(c=this.post_parse.call(this,u,t))&&(t=c)),this.__reentrant_call_depth>1)return t;if(e.cleanupAfterLex&&e.cleanupAfterLex(o),u&&(u.parseError=void 0,u.quoteName=void 0,u.lexer=void 0,u.parser=void 0,e.yy===u&&(e.yy=void 0)),u=void 0,this.parseError=this.originalParseError,this.quoteName=this.originalQuoteName,n.length=0,i.length=0,s.length=0,a=0,!o){for(var l=this.__error_infos.length-1;l>=0;l--){var h=this.__error_infos[l];h&&"function"==typeof h.destroy&&h.destroy()}this.__error_infos.length=0}return t},this.constructParseErrorInfo=function(t,r,o,c){var l={errStr:t,exception:r,text:e.match,value:e.yytext,token:this.describeSymbol(E)||E,token_id:E,line:e.yylineno,expected:o,recoverable:c,state:p,action:y,new_state:g,symbol_stack:n,state_stack:i,value_stack:s,stack_pointer:a,yy:u,lexer:e,parser:this,destroy:function(){var t=!!this.recoverable;for(var e in this)this.hasOwnProperty(e)&&"object"==typeof e&&(this[e]=void 0);this.recoverable=t}};return this.__error_infos.push(l),l};var p,y,d,_,b,m,v,g,E=0,x={$:!0,_$:void 0,yy:u},k=!1;try{for(this.__reentrant_call_depth++,this.pre_parse&&this.pre_parse.call(this,u),u.pre_parse&&u.pre_parse.call(this,u),g=i[a-1];;){if(p=g,this.defaultActions[p])y=2,g=this.defaultActions[p];else if(E||(E=function(){var t=e.lex();return"number"!=typeof t&&(t=r.symbols_[t]||t),t||c}()),_=o[p]&&o[p][E]||l,g=_[1],!(y=_[0])){var A,S=this.describeSymbol(E)||E,N=this.collect_expected_token_set(p);A=e.showPosition?"Parse error on line "+(e.yylineno+1)+":\n"+e.showPosition()+"\n":"Parse error on line "+(e.yylineno+1)+": ",A+=N.length?"Expecting "+N.join(", ")+", got unexpected "+S:"Unexpected "+S,b=this.constructParseErrorInfo(A,null,N,!1),k=this.parseError(b.errStr,b,this.JisonParserError);break}switch(y){default:if(y instanceof Array){b=this.constructParseErrorInfo("Parse Error: multiple actions possible at state: "+p+", token: "+E,null,null,!1),k=this.parseError(b.errStr,b,this.JisonParserError);break}b=this.constructParseErrorInfo("Parsing halted. No viable error recovery approach available due to internal system failure.",null,null,!1),k=this.parseError(b.errStr,b,this.JisonParserError);break;case 1:n[a]=E,s[a]=e.yytext,i[a]=g,++a,E=0,f=e.yytext;continue;case 2:if(v=this.productions_[g-1],m=v[1],s[a]=void 0,void 0!==(d=this.performAction.call(x,f,g,a-1,s))){k=d;break}a-=m;var O=v[0];n[a]=O,s[a]=x.$,g=o[i[a-1]][O],i[a]=g,++a;continue;case 3:k=!0,void 0!==x.$&&(k=x.$)}break}}catch(t){b=this.constructParseErrorInfo("Parsing aborted due to exception.",t,null,!1),k=this.parseError(b.errStr,b,this.JisonParserError)}finally{k=this.cleanupAfterParse(k,!0,!0),this.__reentrant_call_depth--}return k}};w.originalParseError=w.parseError,w.originalQuoteName=w.quoteName;var P={n:"\n","'":"'",'"':'"',t:"\t",r:"\r","\\":"\\","`":"`"},I=/\\(?:(\\|'|"|r|n|t|`)|u(.{4})|x(.{2}))/g,$=function(){function t(t,e){Object.defineProperty(this,"name",{enumerable:!1,writable:!1,value:"JisonLexerError"}),null==t&&(t="???"),Object.defineProperty(this,"message",{enumerable:!1,writable:!0,value:t}),this.hash=e;var r;if(e&&e.exception instanceof Error){var n=e.exception;this.message=n.message||t,r=n.stack}r||(Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,this.constructor):r=new Error(t).stack),r&&Object.defineProperty(this,"stack",{enumerable:!1,writable:!1,value:r})}return"function"==typeof Object.setPrototypeOf?Object.setPrototypeOf(t.prototype,Error.prototype):t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t.prototype.name="JisonLexerError",{EOF:1,ERROR:2,__currentRuleSet__:null,__error_infos:[],__decompressed:!1,done:!1,_backtrack:!1,_input:"",_more:!1,_signaled_error_token:!1,conditionStack:[],match:"",matched:"",matches:!1,yytext:"",offset:0,yyleng:0,yylineno:0,yylloc:null,constructLexErrorInfo:function(t,e){var r={errStr:t,recoverable:!!e,text:this.match,token:null,line:this.yylineno,loc:this.yylloc,yy:this.yy,lexer:this,destroy:function(){var t=!!this.recoverable;for(var e in this)this.hasOwnProperty(e)&&"object"==typeof e&&(this[e]=void 0);this.recoverable=t}};return this.__error_infos.push(r),r},parseError:function(t,e,r){if(this.yy.parser&&"function"==typeof this.yy.parser.parseError)return this.yy.parser.parseError(t,e,r)||this.ERROR;if("function"==typeof this.yy.parseError)return this.yy.parseError(t,e,r)||this.ERROR;throw new r(t,e)},cleanupAfterLex:function(t){if(this.setInput("",{}),!t){for(var e=this.__error_infos.length-1;e>=0;e--){var r=this.__error_infos[e];r&&"function"==typeof r.destroy&&r.destroy()}this.__error_infos.length=0}return this},clear:function(){this.yytext="",this.yyleng=0,this.match="",this.matches=!1,this._more=!1,this._backtrack=!1},setInput:function(t,e){if(this.yy=e||this.yy||{},!this.__decompressed){for(var r=this.rules,n=0,i=r.length;n<i;n++){var s=r[n];"number"==typeof s&&(r[n]=r[s])}var o=this.conditions;for(var a in o){var c=o[a],l=c.rules,i=l.length,u=new Array(i+1),h=new Array(i+1);if(this.rules_prefix1){for(var f=new Array(65536),p=0,n=0;n<i;n++){var y=l[n],s=r[y];u[n+1]=s,h[n+1]=y;var d=this.rules_prefix1[y];if("number"==typeof d&&(d=this.rules_prefix1[d]),d)for(var _=0,b=d.length;_<b;_++){var m=d.charCodeAt(_);f[m]||(f[m]=n+1)}else p||(p=n+1)}p||(p=i+1);for(var n=0;n<65536;n++)f[n]||(f[n]=p);c.__dispatch_lut=f}else for(var n=0;n<i;n++){var y=l[n],s=r[y];u[n+1]=s,h[n+1]=y}c.rules=h,c.__rule_regexes=u,c.__rule_count=i}this.__decompressed=!0}return this._input=t||"",this.clear(),this._signaled_error_token=!1,this.done=!1,this.yylineno=0,this.matched="",this.conditionStack=["INITIAL"],this.__currentRuleSet__=null,this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){if(!this._input)return null;var t=this._input[0];this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t;var e=1,r=!1;if("\n"===t)r=!0;else if("\r"===t){r=!0;var n=this._input[1];"\n"===n&&(e++,t+=n,this.yytext+=n,this.yyleng++,this.offset++,this.match+=n,this.matched+=n,this.options.ranges&&this.yylloc.range[1]++)}return r?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(e),t},unput:function(t){var e=t.length,r=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e;var n=this.match.split(/(?:\r\n?|\n)/g);return this.match=this.match.substr(0,this.match.length-e),this.matched=this.matched.substr(0,this.matched.length-e),r.length-1&&(this.yylineno-=r.length-1),this.yylloc.last_line=this.yylineno+1,this.yylloc.last_column=r?(r.length===n.length?this.yylloc.first_column:0)+n[n.length-r.length].length-r[0].length:this.yylloc.first_column-e,this.options.ranges&&(this.yylloc.range[1]=this.yylloc.range[0]+this.yyleng-e),this.yyleng=this.yytext.length,this.done=!1,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else{var t=this.constructLexErrorInfo("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),!1);this._signaled_error_token=this.parseError(t.errStr,t,this.JisonLexerError)||this.ERROR}return this},less:function(t){return this.unput(this.match.slice(t))},pastInput:function(t,e){var r=this.matched.substring(0,this.matched.length-this.match.length);t<0?t=r.length:t||(t=20),e<0?e=r.length:e||(e=1),r=r.substr(2*-t-2);var n=r.replace(/\r\n|\r/g,"\n").split("\n");return n=n.slice(-e),r=n.join("\n"),r.length>t&&(r="..."+r.substr(-t)),r},upcomingInput:function(t,e){var r=this.match;t<0?t=r.length+this._input.length:t||(t=20),e<0?e=t:e||(e=1),r.length<2*t+2&&(r+=this._input.substring(0,2*t+2));var n=r.replace(/\r\n|\r/g,"\n").split("\n");return n=n.slice(0,e),r=n.join("\n"),r.length>t&&(r=r.substring(0,t)+"..."),r},showPosition:function(t,e){var r=this.pastInput(t).replace(/\s/g," "),n=new Array(r.length+1).join("-");return r+this.upcomingInput(e).replace(/\s/g," ")+"\n"+n+"^"},describeYYLLOC:function(t,e){var r,n=t.first_line,i=t.last_line,s=t.first_column,o=t.last_column-1,a=i-n,c=0===a?o-s:1e3;if(0===a?(r="line "+n+", ",r+=0===c?"column "+s:"columns "+s+" .. "+o):r="lines "+n+"(column "+s+") .. "+i+"(column "+o+")",t.range&&e){var l=t.range[0],u=t.range[1]-1;r+=u===l?" {String Offset: "+l+"}":" {String Offset range: "+l+" .. "+u+"}"}return r},test_match:function(t,e){var r,n,i,s;if(this.options.backtrack_lexer&&(i={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(i.yylloc.range=this.yylloc.range.slice(0))),s=t[0],n=s.match(/(?:\r\n?|\n).*/g),n&&(this.yylineno+=n.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:n?n[n.length-1].length-n[n.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+s.length},this.yytext+=s,this.match+=s,this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+this.yyleng]),this.offset+=s.length,this._more=!1,this._backtrack=!1,this._input=this._input.slice(s.length),this.matched+=s,r=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),r)return r;if(this._backtrack){for(var o in i)this[o]=i[o];return this.__currentRuleSet__=null,!1}return!!this._signaled_error_token&&(r=this._signaled_error_token,this._signaled_error_token=!1,r)},next:function(){if(this.done)return this.clear(),this.EOF;this._input||(this.done=!0);var t,e,r,n;this._more||this.clear();var i=this.__currentRuleSet__;if(!(i||(i=this.__currentRuleSet__=this._currentRules())&&i.rules)){var s=this.constructLexErrorInfo("Internal lexer engine error on line "+(this.yylineno+1)+'. The lex grammar programmer pushed a non-existing condition name "'+this.topState()+'"; this is a fatal error and should be reported to the application programmer team!\n',!1);return this.parseError(s.errStr,s,this.JisonLexerError)||this.ERROR}for(var o=i.rules,a=i.__rule_regexes,c=i.__rule_count,l=1;l<=c;l++)if((r=this._input.match(a[l]))&&(!e||r[0].length>e[0].length)){if(e=r,n=l,this.options.backtrack_lexer){if((t=this.test_match(r,o[l]))!==!1)return t;if(this._backtrack){e=void 0;continue}return!1}if(!this.options.flex)break}if(e)return(t=this.test_match(e,o[n]))!==!1&&t;if(""===this._input)return this.done=!0,this.EOF;var s=this.constructLexErrorInfo("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),this.options.lexer_errors_are_recoverable);return t=this.parseError(s.errStr,s,this.JisonLexerError)||this.ERROR,t===this.ERROR&&(this.match.length||this.input()),t},lex:function(){var t;for("function"==typeof this.options.pre_lex&&(t=this.options.pre_lex.call(this));!t;)t=this.next();return"function"==typeof this.options.post_lex&&(t=this.options.post_lex.call(this,t)||t),t},begin:function(t){return this.pushState(t)},pushState:function(t){return this.conditionStack.push(t),this.__currentRuleSet__=null,this},popState:function(){return this.conditionStack.length-1>0?(this.__currentRuleSet__=null,this.conditionStack.pop()):this.conditionStack[0]},topState:function(t){return t=this.conditionStack.length-1-Math.abs(t||0),t>=0?this.conditionStack[t]:"INITIAL"},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]]:this.conditions.INITIAL},stateStackSize:function(){return this.conditionStack.length},options:{},JisonLexerError:t,performAction:function(t,e,r,n){switch(r){case 0:break;case 25:return e.yytext=o(e.yytext.substr(1,e.yyleng-2)),23;case 26:return e.yytext=o(e.yytext.substr(1,e.yyleng-2)),24;case 27:return e.yytext=o(e.yytext),24;default:return this.simpleCaseActionClusters[r]}},simpleCaseActionClusters:{1:22,2:16,3:17,4:18,5:19,6:20,7:21,8:7,9:8,10:15,11:14,12:9,13:10,14:11,15:12,16:25,17:26,18:27,19:28,20:3,21:13,22:4,23:5,24:6,28:1,29:"INVALID"},rules:[/^(?:\s+)/,/^(?:(-)?\d+(\.\d+)?\b)/,/^(?:\|\|)/,/^(?:&&)/,/^(?:==)/,/^(?:!=)/,/^(?:<=)/,/^(?:>=)/,/^(?:<)/,/^(?:>)/,/^(?:\+\+)/,/^(?:--)/,/^(?:\+)/,/^(?:!)/,/^(?:\()/,/^(?:\))/,/^(?:true)/,/^(?:false)/,/^(?:undefined)/,/^(?:null)/,/^(?:,)/,/^(?:\.)/,/^(?:\[)/,/^(?:\])/,/^(?::)/,/^(?:(("(?:([^\n\r"\\]+)|(\\(?:(?:(?:["'\\bfnrtv])|(?:[^\d"'\\bfnrt-vx]))|(?:[x](?:[\dA-Fa-f]){2})|(?:[u](?:[\dA-Fa-f]){4}))))*")|('(?:([^\n\r'\\]+)|(\\(?:(?:(?:["'\\bfnrtv])|(?:[^\d"'\\bfnrt-vx]))|(?:[x](?:[\dA-Fa-f]){2})|(?:[u](?:[\dA-Fa-f]){4}))))*')))/,/^(?:((`(?:([^\n\r\\`]+)|(\\(?:(?:(?:["'\\bfnrtv])|(?:[^\d"'\\bfnrt-vx]))|(?:[x](?:[\dA-Fa-f]){2})|(?:[u](?:[\dA-Fa-f]){4}))))*`)))/,/^(?:((?:[$A-Z_a-z]|(\\(?:(?:(?:["'\\bfnrtv])|(?:[^\d"'\\bfnrt-vx]))|(?:[x](?:[\dA-Fa-f]){2})|(?:[u](?:[\dA-Fa-f]){4}))))(?:(?:[$A-Z_a-z]|(\\(?:(?:(?:["'\\bfnrtv])|(?:[^\d"'\\bfnrt-vx]))|(?:[x](?:[\dA-Fa-f]){2})|(?:[u](?:[\dA-Fa-f]){4}))))|\d)*))/,/^(?:$)/,/^(?:.)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29],inclusive:!0}}}}();return w.lexer=$,R.prototype=w,w.Parser=R,new R}();void 0!==t&&void 0!==r&&(r.parser=n,r.Parser=n.Parser,r.parse=function(){return n.parse.apply(n,arguments)})},{}],2:[function(t,e,r){"use strict";function n(t,e){this.value=t,this.name=e}function i(t){this.message='Unexpected characters "'+t[0]+'":\n'+t.input.replace(/\t|\n/g,".")+"\n"+new Array(t.index+1).join("-")+"^",this.name="ParseError"}function s(t){function e(){return v.createElement(y)}function r(t,e){R[t.nodeType](t,e)}function s(t,e){return w[t.nodeType](t,e),t}function m(t){if(t instanceof n){var r=t.name;if(O[r])return O[r];var i=e();i.innerHTML=t.value,r&&(i.id=r),t=i}else if("string"==typeof t){if(O[t])return O[t];t=v.querySelector("#"+t)}return this instanceof m?(t?(t.id&&(O[t.id]=this),this.node=E?t:t.cloneNode(!0),this.ready=!1):(void 0!==t&&(this.node=e()),this.ready=!0),this.closures={},this):new m(t)}t=t||{};var v=t.document||document,g=t.prefix||"bb-",E=void 0===t.destructive||!!t.destructive,x=o.map(function(t){return g+t}),k={};x.forEach(function(t,e){k[t]=o[e]});var A=g+f,S="["+A+"]",N=g+p,O={},R={};R[Node.ELEMENT_NODE]=function(t,n){function i(e,r){p=!0;var i=_.parse(r);f[k[m]]=n._addClosure(i),t.removeAttribute(m)}if(t.hasAttribute(x[h])&&t.nodeName!=y)if(t.hasAttribute(x[l])||t.hasAttribute(x[u]))t.removeAttribute(x[h]);else{var s=e();s.setAttribute(x[h],t.getAttribute(x[h])),t.removeAttribute(x[h]),[x[a],x[c],N].forEach(function(e){t.hasAttribute(e)&&(s.setAttribute(e,t.getAttribute(e)),t.removeAttribute(e))}),t.before(s),s.content.appendChild(t),t=s}var f={},p=!1;if(t.attributes.length>o.length)x.forEach(function(e){t.hasAttribute(e)&&i(e,t.getAttribute(e))});else for(var d=t.attributes.length-1;d>=0;d--){var m=t.attributes[d].name;m in k&&i(m,t.attributes[d].value)}t.nodeName==y&&t.hasAttribute(N)&&(p=!0),p&&t.setAttribute(A,JSON.stringify(f)),t.nodeName==y?(r(t.content,n),p||t.replaceWith(t.content)):b.call(t.childNodes).forEach(function(t){r(t,n)})},R[Node.TEXT_NODE]=function(){function n(t){return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}function s(t){return t.replace(p,function(){return arguments[1]})}function o(t){return t.replace(p,function(){return c[arguments[1]]})}var a=t.delimiters||["{","}"],c={"\\":"\\\\"};c[a[0]]=a[0],c[a[1]]=a[1];var h,f,p=new RegExp("\\\\("+["\\\\",n(a[0]),n(a[1])].join("|")+")","g"),y=["aaa((?:a|f|c|d|e|b(?:a|f|c|d|e|b(?:a|f|c|d|e)))*)bbb","aa((?:a|f|c|d|e|b(?:a|f|c|d|e))*)bb","((?:b|f|c|d|e|a(?:b|f|c|d|e))(?:b|f|c|d|e|a(?:b|f|c|d|e))*(?:a(?!a)|b|f|c|d|e||a(?:b|f|c|d|e))|(?:a(?!a)))","(.+)"],d={a:n(a[0]),b:n(a[1]),c:n("\\"+a[0]),d:n("\\"+a[1]),e:"[^"+n(a[0])+n(a[1])+"]",f:n("\\\\")},_=new RegExp(y.map(function(t){return"(?:"+t.replace(/a|b|c|d|e|f/g,function(){return d[arguments[0]]})+")"}).join("|"),"g");return function(t,n){for(;h=_.exec(t.nodeValue);)if(h[3])f=v.createTextNode(s(h[3])),t.before(f);else if(h[2])f=e(),f.setAttribute(x[l],o(h[2])),t.before(f),r(f,n);else{if(!h[1])throw _.lastIndex=0,new i(h);f=e(),f.setAttribute(x[u],o(h[1])),t.before(f),r(f,n)}t.remove()}}(),R[Node.COMMENT_NODE]=function(t,e){},R[Node.DOCUMENT_FRAGMENT_NODE]=function(t,e){b.call(t.childNodes).forEach(function(t){r(t,e)})};var w={};return w[Node.ELEMENT_NODE]=function(){var t,r,n;return function(i,o){var a;if(r=JSON.parse(i.getAttribute(A)),i.removeAttribute(A),r.if)if(n=o.closures[r.if](),i.nextElementSibling&&i.nextElementSibling.hasAttribute(N)){if(!n)return i.nextElementSibling.removeAttribute(N),i.remove();i.nextElementSibling.remove()}else if(!n)return i.remove();if(r.alias&&(n=o.closures[r.alias](),Array.isArray(n)||(n=[n]),a={},d.push(a),n.forEach(function(t){a[t.name]=t.value})),r.text)n=o.closures[r.text](),null!=n?i.replaceWith(n.toString()):i.remove();else if(r.html)n=o.closures[r.html](),null!=n?function(t){t.innerHTML=n.toString(),i.replaceWith(t.content)}(e()):i.remove();else if(i.nodeName==y){if(r.repeat){a||(a={},d.push(a)),n=o.closures[r.repeat]();var c=n._order||"before";Array.isArray(n)||(n=[n]);var l=function(t){var e=o.closures[t];return e?function(){var t=m(e())._clone();i[c](s(t.node.content,t))}:function(){i[c](s(i.cloneNode(!0).content,o))}}(r.import);n.reduceRight(function(t,e){var r=e.name,n=e.value;return function(){n.forEach(function(e,i){a[r]=n[i],a["_"+r+"_"]=i,t()})}},l)()}else if(r.import){n=o.closures[r.import]();var u=m(n)._clone();i.before(s(u.node.content,u))}else i.before(s(i.content,o));i.remove()}else for(r.attr&&(n=o.closures[r.attr](),Array.isArray(n)||(n=[n]),n.forEach(function(t){var e=t.value,r=t.name&&t.name.toString();r&&null!=e&&i.setAttribute(r,e)})),r.class&&(n=o.closures[r.class](),Array.isArray(n)||(n=[n]),n.forEach(function(t){if(null!=t){var e=t.toString();e&&i.classList.add(e)}}));t=i.querySelector(S);)s(t,o);a&&d.pop()}}(),w[Node.DOCUMENT_FRAGMENT_NODE]=function(){var t;return function(e,r){for(;t=e.querySelector(S);)s(t,r)}}(),m.bbObj=function(t,e){return new n(t,e)},m.clean=function(t){if(t)delete O[t];else for(var e in O)delete O[e]},m.prototype.merge=function(){for(var t=this._clone(),e=new Array(arguments.length),r=0;r<e.length;++r)e[r]=arguments[r];return d.init(e),s(t.node.content,t),d.init(),t.node.content},m.prototype._addClosure=function(){var t=0;return function(e){var r="fun"+ ++t;return this.closures[r]=e,r}}(),m.prototype._compile=function(){return r(this.node.content,this),this.ready=!0,this},m.prototype._clone=function(){this.ready||this._compile();var t=new m;return t.node=this.node.cloneNode(!0),t.closures=this.closures,t},m}var o=["if","alias","text","html","repeat","import","attr","class"],a=0,c=1,l=2,u=3,h=4,f="global",p="else",y="TEMPLATE",d={stack:[],resolve:function(t){for(var e,r=this.stack.length;void 0===e&&--r>=0;)e=this.stack[r][t];return e},init:function(t){this.stack=t||[]},push:function(t){this.stack.push(t)},pop:function(){this.stack.pop()}};n.prototype.toString=function(){return this.value&&null!=this.name?this.name.toString():""};var _=t("../parser.js");_.parser.yy.context=d,_.parser.yy.BBObj=n;var b=Array.prototype.slice;e.exports=s},{"../parser.js":1}]},{},[2])(2)});