!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.Barbiche=t()}}(function(){return function t(e,r,n){function i(o,a){if(!r[o]){if(!e[o]){var c="function"==typeof require&&require;if(!a&&c)return c(o,!0);if(s)return s(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var h=r[o]={exports:{}};e[o][0].call(h.exports,function(t){var r=e[o][1][t];return i(r?r:t)},h,h.exports,t,e,r,n)}return r[o].exports}for(var s="function"==typeof require&&require,o=0;o<n.length;o++)i(n[o]);return i}({1:[function(t,e,r){var n=function(){function t(t,e){Object.defineProperty(this,"name",{enumerable:!1,writable:!1,value:"JisonParserError"}),null==t&&(t="???"),Object.defineProperty(this,"message",{enumerable:!1,writable:!0,value:t}),this.hash=e;var r;if(e&&e.exception instanceof Error){var n=e.exception;this.message=n.message||t,r=n.stack}r||(Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,this.constructor):r=new Error(t).stack),r&&Object.defineProperty(this,"stack",{enumerable:!1,writable:!1,value:r})}function e(t){for(var e=[],r=t.pop,n=t.rule,i=0,s=r.length;i<s;i++)e.push([r[i],n[i]]);return e}function r(t){for(var e={},r=t.idx,n=t.goto,i=0,s=r.length;i<s;i++){var o=r[i];e[o]=n[i]}return e}function n(t){for(var e=[],r=t.len,n=t.symbol,i=t.type,s=t.state,o=t.mode,a=t.goto,c=0,l=r.length;c<l;c++){for(var h=r[c],u={},f=0;f<h;f++){var p=n.shift();switch(i.shift()){case 2:u[p]=[o.shift(),a.shift()];break;case 0:u[p]=s.shift();break;default:u[p]=[3]}}e.push(u)}return e}function i(t,e,r){r=r||0;for(var n=0;n<e;n++)this.push(t),t+=r}function s(t,e){for(t=this.length-t,e+=t;t<e;t++)this.push(this[t])}function o(t){for(var e=[],r=0,n=t.length;r<n;r++){var i=t[r];"function"==typeof i?(r++,i.apply(e,t[r])):e.push(i)}return e}function a(t){return t.replace(/(\\(\\|'|"|r|n|t))/g,function(){return R[arguments[2]]})}function c(t,e){return t()||e()}function l(t,e){return t()&&e()}function h(t,e){return t()==e()}function u(t,e){return t()!=e()}function f(t,e){return t()<=e()}function p(t,e){return t()<e()}function y(t,e){return t()>=e()}function _(t,e){return t()>e()}function d(t){return!t()}function b(){return[]}function m(t){return[t()]}function v(t,e){var r=t();return r.push(e()),r}function g(t,e){var r=t();if(null!=r){var n=r[e()];return"function"==typeof n?n.bind(r):n}}function E(t,e){return t().apply(null,e())}function x(t,e){return new this.BBObj(t(),e())}function k(t,e){return t()+e()}function A(t,e){var r=t();return r._order=e,r}function S(){return!0}function O(){return!1}function N(){this.yy={}}"function"==typeof Object.setPrototypeOf?Object.setPrototypeOf(t.prototype,Error.prototype):t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t.prototype.name="JisonParserError";var w={trace:function(){},JisonParserError:t,yy:{},options:{type:"lalr",hasPartialLrUpgradeOnConflict:!0,errorRecoveryTokenDiscardCount:3},symbols_:{"!":10,"!=":19,$accept:0,$end:1,"&&":17,"(":11,")":12,"+":9,"++":15,",":3,"--":14,".":13,":":6,"<":7,"<=":20,"==":18,">":8,">=":21,ArgumentList:33,Arguments:32,Array:30,ArrayItemList:28,EOF:1,FALSE:25,Main:27,NUMBER:22,Order:29,PropertyName:34,STRING:23,SimpleExpression:31,TRUE:24,VAR:26,"[":4,"]":5,error:2,"||":16},terminals_:{1:"EOF",2:"error",3:",",4:"[",5:"]",6:":",7:"<",8:">",9:"+",10:"!",11:"(",12:")",13:".",14:"--",15:"++",16:"||",17:"&&",18:"==",19:"!=",20:"<=",21:">=",22:"NUMBER",23:"STRING",24:"TRUE",25:"FALSE",26:"VAR"},TERROR:2,EOF:1,originalQuoteName:null,originalParseError:null,cleanupAfterParse:null,constructParseErrorInfo:null,__reentrant_call_depth:0,__error_infos:[],quoteName:function(t){return'"'+t+'"'},describeSymbol:function(t){if(t!==this.EOF&&this.terminal_descriptions_&&this.terminal_descriptions_[t])return this.terminal_descriptions_[t];if(t===this.EOF)return"end of input";if(this.terminals_[t])return this.quoteName(this.terminals_[t]);var e=this.symbols_;for(var r in e)if(e[r]===t)return r;return null},collect_expected_token_set:function(t,e){var r=this.TERROR,n=[],i={};if(!e&&this.state_descriptions_&&this.state_descriptions_[t])return[this.state_descriptions_[t]];for(var s in this.table[t])if(s=+s,s!==r){var o=e?s:this.describeSymbol(s);o&&!i[o]&&(n.push(o),i[o]=!0)}return n},productions_:e({pop:o([27,27,28,28,29,29,30,30,i,[31,21],32,32,33,33,34]),rule:o([2,3,1,3,1,1,2,i,[3,11],s,[18,3],i,[1,3],2,4,s,[23,5],s,[29,3]])}),performAction:function(t,e,r,n){var i=this.yy;switch(e){case 1:return n[r-1];case 2:return A.bind(null,n[r-2],n[r-1]);case 3:case 32:this.$=m.bind(null,n[r]);break;case 4:case 33:this.$=v.bind(null,n[r-2],n[r]);break;case 5:this.$="after";break;case 6:this.$="before";break;case 7:case 30:this.$=b;break;case 8:case 20:case 31:this.$=n[r-1];break;case 9:this.$=x.bind(i,n[r-2],n[r]);break;case 10:this.$=c.bind(null,n[r-2],n[r]);break;case 11:this.$=l.bind(null,n[r-2],n[r]);break;case 12:this.$=h.bind(null,n[r-2],n[r]);break;case 13:this.$=u.bind(null,n[r-2],n[r]);break;case 14:this.$=f.bind(null,n[r-2],n[r]);break;case 15:this.$=y.bind(null,n[r-2],n[r]);break;case 16:this.$=p.bind(null,n[r-2],n[r]);break;case 17:this.$=_.bind(null,n[r-2],n[r]);break;case 18:this.$=k.bind(null,n[r-2],n[r]);break;case 19:this.$=d.bind(null,n[r]);break;case 21:this.$=Number.bind(null,t);break;case 22:this.$=a.bind(null,t);break;case 23:this.$=S;break;case 24:this.$=O;break;case 25:this.$=E.bind(null,n[r-1],n[r]);break;case 26:this.$=g.bind(null,n[r-3],n[r-1]);break;case 27:this.$=g.bind(null,n[r-2],n[r]);break;case 28:this.$=n[r];break;case 29:this.$=i.context.resolve.bind(i.context,t);break;case 34:this.$=String.bind(null,t)}},table:n({len:o([11,1,18,10,10,i,[0,6],12,0,1,i,[10,10],0,10,2,s,[18,3],20,15,0,2,16,0,i,[20,10],15,i,[0,3],s,[17,3],0,s,[50,3],10,16,16]),symbol:o([4,10,11,i,[22,6,1],30,31,1,1,4,i,[6,4,1],11,i,[13,9,1],29,32,s,[30,8],30,31,s,[10,11],5,s,[11,7],28,s,[51,3],s,[33,21],s,[10,89],26,34,s,[12,3],12,s,[13,7],33,1,i,[3,7,1],i,[11,11,1],32,s,[194,6],12,13,s,[15,7],3,5,s,[36,8],s,[18,8],s,[53,20],s,[20,180],s,[215,15],3,12,3,s,[251,15],s,[320,20],s,[269,16],s,[52,16]]),type:o([i,[2,8],i,[0,3],1,i,[2,16],0,0,s,[10,28],s,[51,4],s,[43,39],s,[10,73],s,[125,22],s,[178,11],s,[15,29],s,[18,21],s,[20,197],s,[233,27],s,[443,21],s,[54,22],0]),state:o([1,9,2,13,24,9,30,9,31,33,9,34,9,36,9,37,9,38,9,39,9,40,9,41,9,42,9,43,9,44,9,45,9,46,47,9,51,50,i,[24,15],9,58,9,59,24,24]),mode:o([i,[1,148],2,2,s,[3,3],i,[2,3],1,s,[8,7],s,[11,4],s,[35,16],s,[28,3],s,[50,16],s,[24,7],s,[25,7],s,[19,13],s,[20,6],s,[19,14],s,[10,6],s,[19,14],s,[12,4],s,[19,24],s,[9,5],s,[145,9],s,[19,64],s,[221,30],s,[7,12],s,[287,18],s,[252,15],s,[46,14]]),goto:o([11,i,[3,6,1],10,12,25,14,21,22,23,29,26,27,28,i,[15,6,1],s,[24,8],s,[8,9],32,s,[9,7],35,s,[26,17],s,[8,71],48,s,[9,3],49,s,[10,5],19,19,25,i,[19,5],29,19,26,i,[19,8],s,[158,6],52,26,s,[157,6],54,53,3,25,3,s,[176,6],s,[17,6],9,9,25,9,9,s,[16,4],9,26,9,9,s,[19,6],10,10,25,10,10,s,[19,4],10,26,i,[10,3],s,[212,6],11,25,11,11,s,[19,4],11,26,i,[11,4],s,[19,4],12,12,25,12,12,s,[19,4],12,26,i,[12,6],19,20,13,13,25,13,13,s,[19,4],13,26,i,[13,6],19,20,14,14,25,i,[14,4],23,29,14,26,i,[14,8],15,15,25,i,[15,4],23,29,15,26,i,[15,8],16,16,25,i,[16,4],23,29,16,26,i,[16,8],17,17,25,i,[17,4],23,29,17,26,i,[17,8],18,18,25,i,[18,5],29,18,26,i,[18,8],25,55,s,[204,12],57,56,32,s,[238,6],32,s,[17,7],s,[297,16],4,25,4,s,[48,12],33,s,[46,6],33,s,[15,7]])}),defaultActions:r({idx:o([i,[5,6,1],12,24,27,28,32,35,47,48,49,52,53,55,56]),goto:o([i,[21,4,1],28,29,1,25,5,6,7,2,27,34,30,20,8,26,31])}),parseError:function(t,e,r){if(!e.recoverable)throw new r(t,e);this.trace(t),e.destroy()},parse:function(t){function e(){var t=r.lex();return"number"!=typeof t&&(t=n.symbols_[t]||t),t||l}var r,n=this,i=new Array(128),s=new Array(128),o=new Array(128),a=this.table,c=0,l=(this.TERROR,this.EOF),h=(0|this.options.errorRecoveryTokenDiscardCount||3,[0,a.length]);r=this.__lexer__?this.__lexer__:this.__lexer__=Object.create(this.lexer);var u={parseError:null,quoteName:null,lexer:null,parser:null,pre_parse:null,post_parse:null};for(var f in this.yy)Object.prototype.hasOwnProperty.call(this.yy,f)&&(u[f]=this.yy[f]);u.lexer=r,u.parser=this,r.setInput(t,u),o[c]=null,s[c]=0,i[c]=0,++c,"undefined"==typeof r.yytext&&(r.yytext="");var p=r.yytext;"undefined"==typeof r.yylineno&&(r.yylineno=0),"function"==typeof u.parseError?this.parseError=function(t,e,r){return u.parseError(t,e,r)}:this.parseError=this.originalParseError,"function"==typeof u.quoteName?this.quoteName=u.quoteName:this.quoteName=this.originalQuoteName,this.cleanupAfterParse=function(t,e,n){var a;if(e&&(u.post_parse&&(a=u.post_parse.call(this,u,t),"undefined"!=typeof a&&(t=a)),this.post_parse&&(a=this.post_parse.call(this,u,t),"undefined"!=typeof a&&(t=a))),this.__reentrant_call_depth>1)return t;if(r.cleanupAfterLex&&r.cleanupAfterLex(n),u&&(u.parseError=void 0,u.quoteName=void 0,u.lexer=void 0,u.parser=void 0,r.yy===u&&(r.yy=void 0)),u=void 0,this.parseError=this.originalParseError,this.quoteName=this.originalQuoteName,i.length=0,s.length=0,o.length=0,c=0,!n){for(var l=this.__error_infos.length-1;l>=0;l--){var h=this.__error_infos[l];h&&"function"==typeof h.destroy&&h.destroy()}this.__error_infos.length=0}return t},this.constructParseErrorInfo=function(t,e,n,a){var l={errStr:t,exception:e,text:r.match,value:r.yytext,token:this.describeSymbol(x)||x,token_id:x,line:r.yylineno,expected:n,recoverable:a,state:y,action:_,new_state:E,symbol_stack:i,state_stack:s,value_stack:o,stack_pointer:c,yy:u,lexer:r,parser:this,destroy:function(){var t=!!this.recoverable;for(var e in this)this.hasOwnProperty(e)&&"object"==typeof e&&(this[e]=void 0);this.recoverable=t}};return this.__error_infos.push(l),l};var y,_,d,b,m,v,g,E,x=0,k={$:!0,_$:void 0,yy:u},A=!1;try{for(this.__reentrant_call_depth++,this.pre_parse&&this.pre_parse.call(this,u),u.pre_parse&&u.pre_parse.call(this,u),E=s[c-1];;){if(y=E,this.defaultActions[y])_=2,E=this.defaultActions[y];else if(x||(x=e()),b=a[y]&&a[y][x]||h,E=b[1],_=b[0],!_){var S,O=this.describeSymbol(x)||x,N=this.collect_expected_token_set(y);S=r.showPosition?"Parse error on line "+(r.yylineno+1)+":\n"+r.showPosition()+"\n":"Parse error on line "+(r.yylineno+1)+": ",S+=N.length?"Expecting "+N.join(", ")+", got unexpected "+O:"Unexpected "+O,m=this.constructParseErrorInfo(S,null,N,!1),A=this.parseError(m.errStr,m,this.JisonParserError);break}switch(_){default:if(_ instanceof Array){m=this.constructParseErrorInfo("Parse Error: multiple actions possible at state: "+y+", token: "+x,null,null,!1),A=this.parseError(m.errStr,m,this.JisonParserError);break}m=this.constructParseErrorInfo("Parsing halted. No viable error recovery approach available due to internal system failure.",null,null,!1),A=this.parseError(m.errStr,m,this.JisonParserError);break;case 1:i[c]=x,o[c]=r.yytext,s[c]=E,++c,x=0,p=r.yytext;continue;case 2:if(g=this.productions_[E-1],v=g[1],o[c]=void 0,d=this.performAction.call(k,p,E,c-1,o),"undefined"!=typeof d){A=d;break}c-=v;var w=g[0];i[c]=w,o[c]=k.$,E=a[s[c-1]][w],s[c]=E,++c;continue;case 3:A=!0,"undefined"!=typeof k.$&&(A=k.$)}break}}catch(t){m=this.constructParseErrorInfo("Parsing aborted due to exception.",t,null,!1),A=this.parseError(m.errStr,m,this.JisonParserError)}finally{A=this.cleanupAfterParse(A,!0,!0),this.__reentrant_call_depth--}return A}};w.originalParseError=w.parseError,w.originalQuoteName=w.quoteName;var R={n:"\n","'":"'",'"':'"',t:"\t",r:"\r","\\":"\\"},P=function(){function t(t,e){Object.defineProperty(this,"name",{enumerable:!1,writable:!1,value:"JisonLexerError"}),null==t&&(t="???"),Object.defineProperty(this,"message",{enumerable:!1,writable:!0,value:t}),this.hash=e;var r;if(e&&e.exception instanceof Error){var n=e.exception;this.message=n.message||t,r=n.stack}r||(Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,this.constructor):r=new Error(t).stack),r&&Object.defineProperty(this,"stack",{enumerable:!1,writable:!1,value:r})}"function"==typeof Object.setPrototypeOf?Object.setPrototypeOf(t.prototype,Error.prototype):t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t.prototype.name="JisonLexerError";var e={EOF:1,ERROR:2,__currentRuleSet__:null,__error_infos:[],__decompressed:!1,done:!1,_backtrack:!1,_input:"",_more:!1,_signaled_error_token:!1,conditionStack:[],match:"",matched:"",matches:!1,yytext:"",offset:0,yyleng:0,yylineno:0,yylloc:null,constructLexErrorInfo:function(t,e){var r={errStr:t,recoverable:!!e,text:this.match,token:null,line:this.yylineno,loc:this.yylloc,yy:this.yy,lexer:this,destroy:function(){var t=!!this.recoverable;for(var e in this)this.hasOwnProperty(e)&&"object"==typeof e&&(this[e]=void 0);this.recoverable=t}};return this.__error_infos.push(r),r},parseError:function(t,e,r){if(this.yy.parser&&"function"==typeof this.yy.parser.parseError)return this.yy.parser.parseError(t,e,r)||this.ERROR;if("function"==typeof this.yy.parseError)return this.yy.parseError(t,e,r)||this.ERROR;throw new r(t,e)},cleanupAfterLex:function(t){if(this.setInput("",{}),!t){for(var e=this.__error_infos.length-1;e>=0;e--){var r=this.__error_infos[e];r&&"function"==typeof r.destroy&&r.destroy()}this.__error_infos.length=0}return this},clear:function(){this.yytext="",this.yyleng=0,this.match="",this.matches=!1,this._more=!1,this._backtrack=!1},setInput:function(t,e){if(this.yy=e||this.yy||{},!this.__decompressed){for(var r=this.rules,n=0,i=r.length;n<i;n++){var s=r[n];"number"==typeof s&&(r[n]=r[s])}var o=this.conditions;for(var a in o){var c=o[a],l=c.rules,i=l.length,h=new Array(i+1),u=new Array(i+1);if(this.rules_prefix1){for(var f=new Array(65536),p=0,n=0;n<i;n++){var y=l[n],s=r[y];h[n+1]=s,u[n+1]=y;var _=this.rules_prefix1[y];if("number"==typeof _&&(_=this.rules_prefix1[_]),_)for(var d=0,b=_.length;d<b;d++){var m=_.charCodeAt(d);f[m]||(f[m]=n+1)}else p||(p=n+1)}p||(p=i+1);for(var n=0;n<65536;n++)f[n]||(f[n]=p);c.__dispatch_lut=f}else for(var n=0;n<i;n++){var y=l[n],s=r[y];h[n+1]=s,u[n+1]=y}c.rules=u,c.__rule_regexes=h,c.__rule_count=i}this.__decompressed=!0}return this._input=t||"",this.clear(),this._signaled_error_token=!1,this.done=!1,this.yylineno=0,this.matched="",this.conditionStack=["INITIAL"],this.__currentRuleSet__=null,this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){if(!this._input)return null;var t=this._input[0];this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t;var e=1,r=!1;if("\n"===t)r=!0;else if("\r"===t){r=!0;var n=this._input[1];"\n"===n&&(e++,t+=n,this.yytext+=n,this.yyleng++,this.offset++,this.match+=n,this.matched+=n,this.options.ranges&&this.yylloc.range[1]++)}return r?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(e),t},unput:function(t){var e=t.length,r=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e;var n=this.match.split(/(?:\r\n?|\n)/g);return this.match=this.match.substr(0,this.match.length-e),this.matched=this.matched.substr(0,this.matched.length-e),r.length-1&&(this.yylineno-=r.length-1),this.yylloc.last_line=this.yylineno+1,this.yylloc.last_column=r?(r.length===n.length?this.yylloc.first_column:0)+n[n.length-r.length].length-r[0].length:this.yylloc.first_column-e,this.options.ranges&&(this.yylloc.range[1]=this.yylloc.range[0]+this.yyleng-e),this.yyleng=this.yytext.length,this.done=!1,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else{var t=this.constructLexErrorInfo("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),!1);this._signaled_error_token=this.parseError(t.errStr,t,this.JisonLexerError)||this.ERROR}return this},less:function(t){return this.unput(this.match.slice(t))},pastInput:function(t,e){var r=this.matched.substring(0,this.matched.length-this.match.length);t<0?t=r.length:t||(t=20),e<0?e=r.length:e||(e=1),r=r.substr(2*-t-2);var n=r.replace(/\r\n|\r/g,"\n").split("\n");return n=n.slice(-e),r=n.join("\n"),r.length>t&&(r="..."+r.substr(-t)),r},upcomingInput:function(t,e){var r=this.match;t<0?t=r.length+this._input.length:t||(t=20),e<0?e=t:e||(e=1),r.length<2*t+2&&(r+=this._input.substring(0,2*t+2));var n=r.replace(/\r\n|\r/g,"\n").split("\n");return n=n.slice(0,e),r=n.join("\n"),r.length>t&&(r=r.substring(0,t)+"..."),r},showPosition:function(t,e){var r=this.pastInput(t).replace(/\s/g," "),n=new Array(r.length+1).join("-");return r+this.upcomingInput(e).replace(/\s/g," ")+"\n"+n+"^"},describeYYLLOC:function(t,e){var r,n=t.first_line,i=t.last_line,s=t.first_column,o=t.last_column-1,a=i-n,c=0===a?o-s:1e3;if(0===a?(r="line "+n+", ",r+=0===c?"column "+s:"columns "+s+" .. "+o):r="lines "+n+"(column "+s+") .. "+i+"(column "+o+")",t.range&&e){var l=t.range[0],h=t.range[1]-1;r+=h===l?" {String Offset: "+l+"}":" {String Offset range: "+l+" .. "+h+"}"}return r},test_match:function(t,e){var r,n,i,s;if(this.options.backtrack_lexer&&(i={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(i.yylloc.range=this.yylloc.range.slice(0))),s=t[0],n=s.match(/(?:\r\n?|\n).*/g),n&&(this.yylineno+=n.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:n?n[n.length-1].length-n[n.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+s.length},this.yytext+=s,this.match+=s,this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+this.yyleng]),this.offset+=s.length,this._more=!1,this._backtrack=!1,this._input=this._input.slice(s.length),this.matched+=s,r=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),r)return r;if(this._backtrack){for(var o in i)this[o]=i[o];return this.__currentRuleSet__=null,!1}return!!this._signaled_error_token&&(r=this._signaled_error_token,this._signaled_error_token=!1,r)},next:function(){if(this.done)return this.clear(),this.EOF;this._input||(this.done=!0);var t,e,r,n;this._more||this.clear();var i=this.__currentRuleSet__;if(!i&&(i=this.__currentRuleSet__=this._currentRules(),!i||!i.rules)){var s=this.constructLexErrorInfo("Internal lexer engine error on line "+(this.yylineno+1)+'. The lex grammar programmer pushed a non-existing condition name "'+this.topState()+'"; this is a fatal error and should be reported to the application programmer team!\n',!1);return this.parseError(s.errStr,s,this.JisonLexerError)||this.ERROR}for(var o=i.rules,a=i.__rule_regexes,c=i.__rule_count,l=1;l<=c;l++)if(r=this._input.match(a[l]),r&&(!e||r[0].length>e[0].length)){if(e=r,n=l,this.options.backtrack_lexer){if(t=this.test_match(r,o[l]),t!==!1)return t;if(this._backtrack){e=void 0;continue}return!1}if(!this.options.flex)break}if(e)return t=this.test_match(e,o[n]),t!==!1&&t;if(""===this._input)return this.done=!0,this.EOF;var s=this.constructLexErrorInfo("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),this.options.lexer_errors_are_recoverable);return t=this.parseError(s.errStr,s,this.JisonLexerError)||this.ERROR,t===this.ERROR&&(this.match.length||this.input()),t},lex:function(){var t;for("function"==typeof this.options.pre_lex&&(t=this.options.pre_lex.call(this));!t;)t=this.next();return"function"==typeof this.options.post_lex&&(t=this.options.post_lex.call(this,t)||t),t},begin:function(t){return this.pushState(t)},pushState:function(t){return this.conditionStack.push(t),this.__currentRuleSet__=null,this},popState:function(){var t=this.conditionStack.length-1;return t>0?(this.__currentRuleSet__=null,this.conditionStack.pop()):this.conditionStack[0]},topState:function(t){return t=this.conditionStack.length-1-Math.abs(t||0),t>=0?this.conditionStack[t]:"INITIAL"},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]]:this.conditions.INITIAL},stateStackSize:function(){return this.conditionStack.length},options:{},JisonLexerError:t,performAction:function(t,e,r,n){switch(r){case 0:break;case 23:return e.yytext=e.yytext.substr(1,e.yyleng-2),23;default:return this.simpleCaseActionClusters[r]}},simpleCaseActionClusters:{1:22,2:16,3:17,4:18,5:19,6:20,7:21,8:7,9:8,10:15,11:14,12:9,13:10,14:11,15:12,16:24,17:25,18:3,19:13,20:4,21:5,22:6,24:26,25:1,26:"INVALID"},rules:[/^(?:\s+)/,/^(?:(-)?\d+(\.\d+)?\b)/,/^(?:\|\|)/,/^(?:&&)/,/^(?:==)/,/^(?:!=)/,/^(?:<=)/,/^(?:>=)/,/^(?:<)/,/^(?:>)/,/^(?:\+\+)/,/^(?:--)/,/^(?:\+)/,/^(?:!)/,/^(?:\()/,/^(?:\))/,/^(?:true)/,/^(?:false)/,/^(?:,)/,/^(?:\.)/,/^(?:\[)/,/^(?:\])/,/^(?::)/,/^(?:(("(?:([^\n\r"\\]+)|(\\(?:(?:(?:["'\\bfnrtv])|(?:[^\d"'\\bfnrt-vx]))|(?:(?:[1-7][0-7]{0,2}|[0-7]{2,3}))|(?:[x]{HexDigit}{2})|(?:[u]{HexDigit}{4})))|(?:\\(\r\n|\r|\n)))*")|('(?:([^\n\r'\\]+)|(\\(?:(?:(?:["'\\bfnrtv])|(?:[^\d"'\\bfnrt-vx]))|(?:(?:[1-7][0-7]{0,2}|[0-7]{2,3}))|(?:[x]{HexDigit}{2})|(?:[u]{HexDigit}{4})))|(?:\\(\r\n|\r|\n)))*')))/,/^(?:((?:[$A-Z_a-z])(?:(?:[$A-Z_a-z])|\d)*))/,/^(?:$)/,/^(?:.)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26],inclusive:!0}}};return e}();return w.lexer=P,N.prototype=w,w.Parser=N,new N}();"undefined"!=typeof t&&"undefined"!=typeof r&&(r.parser=n,r.Parser=n.Parser,r.parse=function(){return n.parse.apply(n,arguments)})},{}],2:[function(t,e,r){"use strict";function n(t,e){this.value=t,this.name=e}function i(t){this.message='Unexpected characters "'+t[0]+'":\n'+t.input.replace(/\t|\n/g,".")+"\n"+new Array(t.index+1).join("-")+"^",this.name="ParseError"}function s(t){function e(){return v.createElement("template")}function r(t,e){w[t.nodeType](t,e)}function s(t,e){return R[t.nodeType](t,e),t}function m(t){if(t instanceof n){var r=t.name;if(N[r])return N[r];var i=e();i.innerHTML=t.value,r&&(i.id=r),t=i}else if("string"==typeof t){if(N[t])return N[t];t=v.querySelector("#"+t)}return this instanceof m?(t?(t.id&&(N[t.id]=this),this.node=E?t:t.cloneNode(!0),this.ready=!1):(void 0!==t&&(this.node=e()),this.ready=!0),this.closures={},this):new m(t)}t=t||{};var v=t.document||document,g=t.prefix||"bb-",E=void 0===t.destructive||!!t.destructive,x=o.map(function(t){return g+t}),k={};x.forEach(function(t,e){k[t]=o[e]});var A=g+f,S="["+A+"]",O=g+p,N={},w={};w[Node.ELEMENT_NODE]=function(t,n){function i(e,r){p=!0;var i=d.parse(r);f[k[m]]=n._addClosure(i),t.removeAttribute(m)}if(t.hasAttribute(x[u])&&t.nodeName!=y)if(t.hasAttribute(x[l])||t.hasAttribute(x[h]))t.removeAttribute(x[u]);else{var s=e();s.setAttribute(x[u],t.getAttribute(x[u])),t.removeAttribute(x[u]),[x[a],x[c]].forEach(function(e){t.hasAttribute(e)&&(s.setAttribute(e,t.getAttribute(e)),t.removeAttribute(e))}),t.hasAttribute(O)&&s.setAttribute(O,""),t.before(s),s.content.appendChild(t),t=s}var f={},p=!1;if(t.attributes.length>o.length)x.forEach(function(e){t.hasAttribute(e)&&i(e,t.getAttribute(e))});else for(var _=t.attributes.length-1;_>=0;_--){var m=t.attributes[_].name;m in k&&i(m,t.attributes[_].value)}p&&t.setAttribute(A,JSON.stringify(f)),t.nodeName==y?(r(t.content,n),t.hasAttribute(O)&&(p=!0),p||t.replaceWith(t.content)):b.call(t.childNodes).forEach(function(t){r(t,n)})},w[Node.TEXT_NODE]=function(){function n(t){return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}function s(t){return t.replace(a,function(){return arguments[1]})}var o=t.delimiters||["{","}"],a=new RegExp("\\\\("+["\\\\",n(o[0]),n(o[1])].join("|")+")","g"),c=["aaa((?:a|f|c|d|e|b(?:a|f|c|d|e|b(?:a|f|c|d|e)))*)bbb","aa((?:a|f|c|d|e|b(?:a|f|c|d|e))*)bb","((?:b|f|c|d|e|a(?:b|f|c|d|e))(?:b|f|c|d|e|a(?:b|f|c|d|e))*(?:a(?!a)|b|f|c|d|e||a(?:b|f|c|d|e))|(?:a(?!a)))","(.+)"],u={a:n(o[0]),b:n(o[1]),c:n("\\"+o[0]),d:n("\\"+o[1]),e:"[^"+n(o[0])+n(o[1])+"]",f:n("\\\\")},f=new RegExp(c.map(function(t){return"(?:"+t.replace(/a|b|c|d|e|f/g,function(){return u[arguments[0]]})+")"}).join("|"),"g");return function(t,n){for(var o,a;o=f.exec(t.nodeValue);)if(o[3])a=v.createTextNode(s(o[3])),t.before(a);else if(o[2])a=e(),a.setAttribute(x[l],s(o[2])),t.before(a),r(a,n);else{if(!o[1])throw new i(o);a=e(),a.setAttribute(x[h],s(o[1])),t.before(a),r(a,n)}t.remove()}}(),w[Node.COMMENT_NODE]=function(t,e){},w[Node.DOCUMENT_FRAGMENT_NODE]=function(t,e){b.call(t.childNodes).forEach(function(t){r(t,e)})};var R={};return R[Node.ELEMENT_NODE]=function(t,r){var n={},i=!1,o=JSON.parse(t.getAttribute(A));t.removeAttribute(A);var a;if(o.if){a=r.closures[o.if]();var c=t.nextElementSibling&&t.nextElementSibling.hasAttribute(O);if(c){if(!a)return t.nextElementSibling.removeAttribute(O),t.remove();t.nextElementSibling.remove()}else if(!a)return t.remove()}if(o.alias&&(a=r.closures[o.alias](),Array.isArray(a)||(a=[a]),a.forEach(function(t){n[t.name]=t.value}),_.push(n),i=!0),o.text)a=r.closures[o.text](),null!=a?t.replaceWith(a.toString()):t.remove();else if(o.html)a=r.closures[o.html](),null!=a?!function(e){e.innerHTML=a.toString(),t.replaceWith(e.content)}(e()):t.remove();else if(t.nodeName==y){if(o.repeat){i||(_.push(n),i=!0),a=r.closures[o.repeat]();var l=a._order||"before";Array.isArray(a)||(a=[a]);var h=function(e){var n=r.closures[e];return n?function(){var e=m(n())._clone();t[l](s(e.node.content,e))}:function(){t[l](s(t.cloneNode(!0).content,r))}}(o.import);a.reduceRight(function(t,e){var r=e.name,i=e.value;return function(){i.forEach(function(e,s){n[r]=i[s],n["_"+r+"_"]=s,t()})}},h)()}else if(o.import){a=r.closures[o.import]();var u=m(a)._clone();t.before(s(u.node.content,u))}else t.before(s(t.content,r));t.remove()}else{o.attr&&(a=r.closures[o.attr](),Array.isArray(a)||(a=[a]),a.forEach(function(e){var r=e.value,n=e.name&&e.name.toString();n&&null!=r&&t.setAttribute(n,r)})),o.class&&(a=r.closures[o.class](),Array.isArray(a)||(a=[a]),a.forEach(function(e){if(null!=e){var r=e.toString();r&&t.classList.add(r)}}));for(var f;f=t.querySelector(S);)s(f,r)}i&&_.pop()},R[Node.DOCUMENT_FRAGMENT_NODE]=function(t,e){for(var r;r=t.querySelector(S);)s(r,e)},m.bbObj=function(t,e){return new n(t,e)},m.clean=function(t){if(t)delete N[t];else for(var e in N)delete N[e]},m.prototype.merge=function(){for(var t=this._clone(),e=new Array(arguments.length),r=0;r<e.length;++r)e[r]=arguments[r];return _.init(e),s(t.node.content,t),_.init(),t.node.content},m.prototype._addClosure=function(){var t=0;return function(e){var r="fun"+ ++t;return this.closures[r]=e,r}}(),m.prototype._compile=function(){return r(this.node.content,this),this.ready=!0,this},m.prototype._clone=function(){this.ready||this._compile();var t=new m;return t.node=this.node.cloneNode(!0),t.closures=this.closures,t},m}var o=["if","alias","text","html","repeat","import","attr","class"],a=0,c=1,l=2,h=3,u=4,f="global",p="else",y="TEMPLATE",_={stack:[],resolve:function(t){for(var e,r=this.stack.length-1;void 0===e&&r>=0;)e=this.stack[r][t],r--;return void 0===e?window[t]:e},init:function(t){this.stack=t||[]},push:function(t){this.stack.push(t)},pop:function(){return this.stack.pop()}};n.prototype.toString=function(){return this.value&&null!=this.name?this.name.toString():""};var d=t("../parser.js");d.parser.yy.context=_,d.parser.yy.BBObj=n;var b=Array.prototype.slice;e.exports=s},{"../parser.js":1}]},{},[2])(2)});