!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.Barbiche=t()}}(function(){return function t(e,r,n){function i(o,a){if(!r[o]){if(!e[o]){var c="function"==typeof require&&require;if(!a&&c)return c(o,!0);if(s)return s(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var u=r[o]={exports:{}};e[o][0].call(u.exports,function(t){var r=e[o][1][t];return i(r?r:t)},u,u.exports,t,e,r,n)}return r[o].exports}for(var s="function"==typeof require&&require,o=0;o<n.length;o++)i(n[o]);return i}({1:[function(t,e,r){var n=function(){function t(t,e){Object.defineProperty(this,"name",{enumerable:!1,writable:!1,value:"JisonParserError"}),null==t&&(t="???"),Object.defineProperty(this,"message",{enumerable:!1,writable:!0,value:t}),this.hash=e;var r;if(e&&e.exception instanceof Error){var n=e.exception;this.message=n.message||t,r=n.stack}r||(Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,this.constructor):r=new Error(t).stack),r&&Object.defineProperty(this,"stack",{enumerable:!1,writable:!1,value:r})}function e(t){for(var e=[],r=t.pop,n=t.rule,i=0,s=r.length;i<s;i++)e.push([r[i],n[i]]);return e}function r(t){for(var e={},r=t.idx,n=t.goto,i=0,s=r.length;i<s;i++){e[r[i]]=n[i]}return e}function n(t){for(var e=[],r=t.len,n=t.symbol,i=t.type,s=t.state,o=t.mode,a=t.goto,c=0,l=r.length;c<l;c++){for(var u=r[c],h={},f=0;f<u;f++){var p=n.shift();switch(i.shift()){case 2:h[p]=[o.shift(),a.shift()];break;case 0:h[p]=s.shift();break;default:h[p]=[3]}}e.push(h)}return e}function i(t,e,r){r=r||0;for(var n=0;n<e;n++)this.push(t),t+=r}function s(t,e){for(t=this.length-t,e+=t;t<e;t++)this.push(this[t])}function o(t){for(var e=[],r=0,n=t.length;r<n;r++){var i=t[r];"function"==typeof i?(r++,i.apply(e,t[r])):e.push(i)}return e}function a(t){return String.fromCharCode(parseInt(t,16))}function c(){return arguments[1]?T[arguments[1]]:a(arguments[2]||arguments[3])}function l(t){return t.replace(/\\(?:(\\|'|"|r|n|t|`)|u(.{4})|x(.{2}))/g,c)}function u(t,e){return t()||e()}function h(t,e){return t()&&e()}function f(t,e){return t()==e()}function p(t,e){return t()!=e()}function y(t,e){return t()<=e()}function _(t,e){return t()<e()}function d(t,e){return t()>=e()}function b(t,e){return t()>e()}function v(t){return!t()}function m(){return[]}function g(t){return[t()]}function E(t,e){var r=t();return r.push(e()),r}function x(t,e){var r=t();if(null!=r){var n=r[e()];return"function"==typeof n?n.bind(r):n}}function k(t,e){return t().apply(null,e())}function A(t,e){return new this.BBObj(t(),e())}function S(t,e){return t()+e()}function O(t,e){var r=t();return r._order=e,r}function N(){return!0}function P(){return!1}function w(){this.yy={}}"function"==typeof Object.setPrototypeOf?Object.setPrototypeOf(t.prototype,Error.prototype):t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t.prototype.name="JisonParserError";var R={trace:function(){},JisonParserError:t,yy:{},options:{type:"lalr",hasPartialLrUpgradeOnConflict:!0,errorRecoveryTokenDiscardCount:3},symbols_:{"!":10,"!=":19,$accept:0,$end:1,"&&":17,"(":11,")":12,"+":9,"++":15,",":3,"--":14,".":13,":":6,"<":7,"<=":20,"==":18,">":8,">=":21,ArgumentList:33,Arguments:32,Array:30,ArrayItemList:28,EOF:1,FALSE:25,IDENTIFIER:26,Main:27,NUMBER:22,Order:29,PropertyName:34,STRING:23,SimpleExpression:31,TRUE:24,"[":4,"]":5,error:2,"||":16},terminals_:{1:"EOF",2:"error",3:",",4:"[",5:"]",6:":",7:"<",8:">",9:"+",10:"!",11:"(",12:")",13:".",14:"--",15:"++",16:"||",17:"&&",18:"==",19:"!=",20:"<=",21:">=",22:"NUMBER",23:"STRING",24:"TRUE",25:"FALSE",26:"IDENTIFIER"},TERROR:2,EOF:1,originalQuoteName:null,originalParseError:null,cleanupAfterParse:null,constructParseErrorInfo:null,__reentrant_call_depth:0,__error_infos:[],quoteName:function(t){return'"'+t+'"'},describeSymbol:function(t){if(t!==this.EOF&&this.terminal_descriptions_&&this.terminal_descriptions_[t])return this.terminal_descriptions_[t];if(t===this.EOF)return"end of input";if(this.terminals_[t])return this.quoteName(this.terminals_[t]);var e=this.symbols_;for(var r in e)if(e[r]===t)return r;return null},collect_expected_token_set:function(t,e){var r=this.TERROR,n=[],i={};if(!e&&this.state_descriptions_&&this.state_descriptions_[t])return[this.state_descriptions_[t]];for(var s in this.table[t])if(s=+s,s!==r){var o=e?s:this.describeSymbol(s);o&&!i[o]&&(n.push(o),i[o]=!0)}return n},productions_:e({pop:o([27,27,28,28,29,29,30,30,i,[31,21],32,32,33,33,34]),rule:o([2,3,1,3,1,1,2,i,[3,11],s,[18,3],i,[1,3],2,4,s,[23,5],s,[29,3]])}),performAction:function(t,e,r,n){var i=this.yy;switch(e){case 1:return n[r-1];case 2:return O.bind(null,n[r-2],n[r-1]);case 3:case 32:this.$=g.bind(null,n[r]);break;case 4:case 33:this.$=E.bind(null,n[r-2],n[r]);break;case 5:this.$="after";break;case 6:this.$="before";break;case 7:case 30:this.$=m;break;case 8:case 20:case 31:this.$=n[r-1];break;case 9:this.$=A.bind(i,n[r-2],n[r]);break;case 10:this.$=u.bind(null,n[r-2],n[r]);break;case 11:this.$=h.bind(null,n[r-2],n[r]);break;case 12:this.$=f.bind(null,n[r-2],n[r]);break;case 13:this.$=p.bind(null,n[r-2],n[r]);break;case 14:this.$=y.bind(null,n[r-2],n[r]);break;case 15:this.$=d.bind(null,n[r-2],n[r]);break;case 16:this.$=_.bind(null,n[r-2],n[r]);break;case 17:this.$=b.bind(null,n[r-2],n[r]);break;case 18:this.$=S.bind(null,n[r-2],n[r]);break;case 19:this.$=v.bind(null,n[r]);break;case 21:var s=Number(t);this.$=function(){return s};break;case 22:case 34:this.$=function(){return t};break;case 23:this.$=N;break;case 24:this.$=P;break;case 25:this.$=k.bind(null,n[r-1],n[r]);break;case 26:this.$=x.bind(null,n[r-3],n[r-1]);break;case 27:this.$=x.bind(null,n[r-2],n[r]);break;case 28:this.$=n[r];break;case 29:this.$=i.context.resolve.bind(i.context,t)}},table:n({len:o([11,1,18,10,10,i,[0,6],12,0,1,i,[10,10],0,10,2,s,[18,3],20,15,0,2,16,0,i,[20,10],15,i,[0,3],s,[17,3],0,s,[50,3],10,16,16]),symbol:o([4,10,11,i,[22,6,1],30,31,1,1,4,i,[6,4,1],11,i,[13,9,1],29,32,s,[30,8],30,31,s,[10,11],5,s,[11,7],28,s,[51,3],s,[33,21],s,[10,89],26,34,s,[12,3],12,s,[13,7],33,1,i,[3,7,1],i,[11,11,1],32,s,[194,6],12,13,s,[15,7],3,5,s,[36,8],s,[18,8],s,[53,20],s,[20,180],s,[215,15],3,12,3,s,[251,15],s,[320,20],s,[269,16],s,[52,16]]),type:o([i,[2,8],i,[0,3],1,i,[2,16],0,0,s,[10,28],s,[51,4],s,[43,39],s,[10,73],s,[125,22],s,[178,11],s,[15,29],s,[18,21],s,[20,197],s,[233,27],s,[443,21],s,[54,22],0]),state:o([1,9,2,13,24,9,30,9,31,33,9,34,9,36,9,37,9,38,9,39,9,40,9,41,9,42,9,43,9,44,9,45,9,46,47,9,51,50,i,[24,15],9,58,9,59,24,24]),mode:o([i,[1,148],2,2,s,[3,3],i,[2,3],1,s,[8,7],s,[11,4],s,[35,16],s,[28,3],s,[50,16],s,[24,7],s,[25,7],s,[19,13],s,[20,6],s,[19,14],s,[10,6],s,[19,14],s,[12,4],s,[19,24],s,[9,5],s,[145,9],s,[19,64],s,[221,30],s,[7,12],s,[287,18],s,[252,15],s,[46,14]]),goto:o([11,i,[3,6,1],10,12,25,14,21,22,23,29,26,27,28,i,[15,6,1],s,[24,8],s,[8,9],32,s,[9,7],35,s,[26,17],s,[8,71],48,s,[9,3],49,s,[10,5],19,19,25,i,[19,5],29,19,26,i,[19,8],s,[158,6],52,26,s,[157,6],54,53,3,25,3,s,[176,6],s,[17,6],9,9,25,9,9,s,[16,4],9,26,9,9,s,[19,6],10,10,25,10,10,s,[19,4],10,26,i,[10,3],s,[212,6],11,25,11,11,s,[19,4],11,26,i,[11,4],s,[19,4],12,12,25,12,12,s,[19,4],12,26,i,[12,6],19,20,13,13,25,13,13,s,[19,4],13,26,i,[13,6],19,20,14,14,25,i,[14,4],23,29,14,26,i,[14,8],15,15,25,i,[15,4],23,29,15,26,i,[15,8],16,16,25,i,[16,4],23,29,16,26,i,[16,8],17,17,25,i,[17,4],23,29,17,26,i,[17,8],18,18,25,i,[18,5],29,18,26,i,[18,8],25,55,s,[204,12],57,56,32,s,[238,6],32,s,[17,7],s,[297,16],4,25,4,s,[48,12],33,s,[46,6],33,s,[15,7]])}),defaultActions:r({idx:o([i,[5,6,1],12,24,27,28,32,35,47,48,49,52,53,55,56]),goto:o([i,[21,4,1],28,29,1,25,5,6,7,2,27,34,30,20,8,26,31])}),parseError:function(t,e,r){if(!e.recoverable)throw new r(t,e);this.trace(t),e.destroy()},parse:function(t){function e(){var t=r.lex();return"number"!=typeof t&&(t=n.symbols_[t]||t),t||l}var r,n=this,i=new Array(128),s=new Array(128),o=new Array(128),a=this.table,c=0,l=(this.TERROR,this.EOF),u=(this.options.errorRecoveryTokenDiscardCount,[0,a.length]);r=this.__lexer__?this.__lexer__:this.__lexer__=Object.create(this.lexer);var h={parseError:null,quoteName:null,lexer:null,parser:null,pre_parse:null,post_parse:null};for(var f in this.yy)Object.prototype.hasOwnProperty.call(this.yy,f)&&(h[f]=this.yy[f]);h.lexer=r,h.parser=this,r.setInput(t,h),o[c]=null,s[c]=0,i[c]=0,++c,void 0===r.yytext&&(r.yytext="");var p=r.yytext;void 0===r.yylineno&&(r.yylineno=0),"function"==typeof h.parseError?this.parseError=function(t,e,r){return h.parseError(t,e,r)}:this.parseError=this.originalParseError,"function"==typeof h.quoteName?this.quoteName=h.quoteName:this.quoteName=this.originalQuoteName,this.cleanupAfterParse=function(t,e,n){var a;if(e&&(h.post_parse&&(a=h.post_parse.call(this,h,t),void 0!==a&&(t=a)),this.post_parse&&(a=this.post_parse.call(this,h,t),void 0!==a&&(t=a))),this.__reentrant_call_depth>1)return t;if(r.cleanupAfterLex&&r.cleanupAfterLex(n),h&&(h.parseError=void 0,h.quoteName=void 0,h.lexer=void 0,h.parser=void 0,r.yy===h&&(r.yy=void 0)),h=void 0,this.parseError=this.originalParseError,this.quoteName=this.originalQuoteName,i.length=0,s.length=0,o.length=0,c=0,!n){for(var l=this.__error_infos.length-1;l>=0;l--){var u=this.__error_infos[l];u&&"function"==typeof u.destroy&&u.destroy()}this.__error_infos.length=0}return t},this.constructParseErrorInfo=function(t,e,n,a){var l={errStr:t,exception:e,text:r.match,value:r.yytext,token:this.describeSymbol(x)||x,token_id:x,line:r.yylineno,expected:n,recoverable:a,state:y,action:_,new_state:E,symbol_stack:i,state_stack:s,value_stack:o,stack_pointer:c,yy:h,lexer:r,parser:this,destroy:function(){var t=!!this.recoverable;for(var e in this)this.hasOwnProperty(e)&&"object"==typeof e&&(this[e]=void 0);this.recoverable=t}};return this.__error_infos.push(l),l};var y,_,d,b,v,m,g,E,x=0,k={$:!0,_$:void 0,yy:h},A=!1;try{for(this.__reentrant_call_depth++,this.pre_parse&&this.pre_parse.call(this,h),h.pre_parse&&h.pre_parse.call(this,h),E=s[c-1];;){if(y=E,this.defaultActions[y])_=2,E=this.defaultActions[y];else if(x||(x=e()),b=a[y]&&a[y][x]||u,E=b[1],_=b[0],!_){var S,O=this.describeSymbol(x)||x,N=this.collect_expected_token_set(y);S=r.showPosition?"Parse error on line "+(r.yylineno+1)+":\n"+r.showPosition()+"\n":"Parse error on line "+(r.yylineno+1)+": ",S+=N.length?"Expecting "+N.join(", ")+", got unexpected "+O:"Unexpected "+O,v=this.constructParseErrorInfo(S,null,N,!1),A=this.parseError(v.errStr,v,this.JisonParserError);break}switch(_){default:if(_ instanceof Array){v=this.constructParseErrorInfo("Parse Error: multiple actions possible at state: "+y+", token: "+x,null,null,!1),A=this.parseError(v.errStr,v,this.JisonParserError);break}v=this.constructParseErrorInfo("Parsing halted. No viable error recovery approach available due to internal system failure.",null,null,!1),A=this.parseError(v.errStr,v,this.JisonParserError);break;case 1:i[c]=x,o[c]=r.yytext,s[c]=E,++c,x=0,p=r.yytext;continue;case 2:if(g=this.productions_[E-1],m=g[1],o[c]=void 0,d=this.performAction.call(k,p,E,c-1,o),void 0!==d){A=d;break}c-=m;var P=g[0];i[c]=P,o[c]=k.$,E=a[s[c-1]][P],s[c]=E,++c;continue;case 3:A=!0,void 0!==k.$&&(A=k.$)}break}}catch(t){v=this.constructParseErrorInfo("Parsing aborted due to exception.",t,null,!1),A=this.parseError(v.errStr,v,this.JisonParserError)}finally{A=this.cleanupAfterParse(A,!0,!0),this.__reentrant_call_depth--}return A}};R.originalParseError=R.parseError,R.originalQuoteName=R.quoteName;var T={n:"\n","'":"'",'"':'"',t:"\t",r:"\r","\\":"\\","`":"`"},I=function(){function t(t,e){Object.defineProperty(this,"name",{enumerable:!1,writable:!1,value:"JisonLexerError"}),null==t&&(t="???"),Object.defineProperty(this,"message",{enumerable:!1,writable:!0,value:t}),this.hash=e;var r;if(e&&e.exception instanceof Error){var n=e.exception;this.message=n.message||t,r=n.stack}r||(Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,this.constructor):r=new Error(t).stack),r&&Object.defineProperty(this,"stack",{enumerable:!1,writable:!1,value:r})}return"function"==typeof Object.setPrototypeOf?Object.setPrototypeOf(t.prototype,Error.prototype):t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t.prototype.name="JisonLexerError",{EOF:1,ERROR:2,__currentRuleSet__:null,__error_infos:[],__decompressed:!1,done:!1,_backtrack:!1,_input:"",_more:!1,_signaled_error_token:!1,conditionStack:[],match:"",matched:"",matches:!1,yytext:"",offset:0,yyleng:0,yylineno:0,yylloc:null,constructLexErrorInfo:function(t,e){var r={errStr:t,recoverable:!!e,text:this.match,token:null,line:this.yylineno,loc:this.yylloc,yy:this.yy,lexer:this,destroy:function(){var t=!!this.recoverable;for(var e in this)this.hasOwnProperty(e)&&"object"==typeof e&&(this[e]=void 0);this.recoverable=t}};return this.__error_infos.push(r),r},parseError:function(t,e,r){if(this.yy.parser&&"function"==typeof this.yy.parser.parseError)return this.yy.parser.parseError(t,e,r)||this.ERROR;if("function"==typeof this.yy.parseError)return this.yy.parseError(t,e,r)||this.ERROR;throw new r(t,e)},cleanupAfterLex:function(t){if(this.setInput("",{}),!t){for(var e=this.__error_infos.length-1;e>=0;e--){var r=this.__error_infos[e];r&&"function"==typeof r.destroy&&r.destroy()}this.__error_infos.length=0}return this},clear:function(){this.yytext="",this.yyleng=0,this.match="",this.matches=!1,this._more=!1,this._backtrack=!1},setInput:function(t,e){if(this.yy=e||this.yy||{},!this.__decompressed){for(var r=this.rules,n=0,i=r.length;n<i;n++){var s=r[n];"number"==typeof s&&(r[n]=r[s])}var o=this.conditions;for(var a in o){var c=o[a],l=c.rules,i=l.length,u=new Array(i+1),h=new Array(i+1);if(this.rules_prefix1){for(var f=new Array(65536),p=0,n=0;n<i;n++){var y=l[n],s=r[y];u[n+1]=s,h[n+1]=y;var _=this.rules_prefix1[y];if("number"==typeof _&&(_=this.rules_prefix1[_]),_)for(var d=0,b=_.length;d<b;d++){var v=_.charCodeAt(d);f[v]||(f[v]=n+1)}else p||(p=n+1)}p||(p=i+1);for(var n=0;n<65536;n++)f[n]||(f[n]=p);c.__dispatch_lut=f}else for(var n=0;n<i;n++){var y=l[n],s=r[y];u[n+1]=s,h[n+1]=y}c.rules=h,c.__rule_regexes=u,c.__rule_count=i}this.__decompressed=!0}return this._input=t||"",this.clear(),this._signaled_error_token=!1,this.done=!1,this.yylineno=0,this.matched="",this.conditionStack=["INITIAL"],this.__currentRuleSet__=null,this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){if(!this._input)return null;var t=this._input[0];this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t;var e=1,r=!1;if("\n"===t)r=!0;else if("\r"===t){r=!0;var n=this._input[1];"\n"===n&&(e++,t+=n,this.yytext+=n,this.yyleng++,this.offset++,this.match+=n,this.matched+=n,this.options.ranges&&this.yylloc.range[1]++)}return r?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(e),t},unput:function(t){var e=t.length,r=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e;var n=this.match.split(/(?:\r\n?|\n)/g);return this.match=this.match.substr(0,this.match.length-e),this.matched=this.matched.substr(0,this.matched.length-e),r.length-1&&(this.yylineno-=r.length-1),this.yylloc.last_line=this.yylineno+1,this.yylloc.last_column=r?(r.length===n.length?this.yylloc.first_column:0)+n[n.length-r.length].length-r[0].length:this.yylloc.first_column-e,this.options.ranges&&(this.yylloc.range[1]=this.yylloc.range[0]+this.yyleng-e),this.yyleng=this.yytext.length,this.done=!1,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else{var t=this.constructLexErrorInfo("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),!1);this._signaled_error_token=this.parseError(t.errStr,t,this.JisonLexerError)||this.ERROR}return this},less:function(t){return this.unput(this.match.slice(t))},pastInput:function(t,e){var r=this.matched.substring(0,this.matched.length-this.match.length);t<0?t=r.length:t||(t=20),e<0?e=r.length:e||(e=1),r=r.substr(2*-t-2);var n=r.replace(/\r\n|\r/g,"\n").split("\n");return n=n.slice(-e),r=n.join("\n"),r.length>t&&(r="..."+r.substr(-t)),r},upcomingInput:function(t,e){var r=this.match;t<0?t=r.length+this._input.length:t||(t=20),e<0?e=t:e||(e=1),r.length<2*t+2&&(r+=this._input.substring(0,2*t+2));var n=r.replace(/\r\n|\r/g,"\n").split("\n");return n=n.slice(0,e),r=n.join("\n"),r.length>t&&(r=r.substring(0,t)+"..."),r},showPosition:function(t,e){var r=this.pastInput(t).replace(/\s/g," "),n=new Array(r.length+1).join("-");return r+this.upcomingInput(e).replace(/\s/g," ")+"\n"+n+"^"},describeYYLLOC:function(t,e){var r,n=t.first_line,i=t.last_line,s=t.first_column,o=t.last_column-1,a=i-n,c=0===a?o-s:1e3;if(0===a?(r="line "+n+", ",r+=0===c?"column "+s:"columns "+s+" .. "+o):r="lines "+n+"(column "+s+") .. "+i+"(column "+o+")",t.range&&e){var l=t.range[0],u=t.range[1]-1;r+=u===l?" {String Offset: "+l+"}":" {String Offset range: "+l+" .. "+u+"}"}return r},test_match:function(t,e){var r,n,i,s;if(this.options.backtrack_lexer&&(i={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(i.yylloc.range=this.yylloc.range.slice(0))),s=t[0],n=s.match(/(?:\r\n?|\n).*/g),n&&(this.yylineno+=n.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:n?n[n.length-1].length-n[n.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+s.length},this.yytext+=s,this.match+=s,this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+this.yyleng]),this.offset+=s.length,this._more=!1,this._backtrack=!1,this._input=this._input.slice(s.length),this.matched+=s,r=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),r)return r;if(this._backtrack){for(var o in i)this[o]=i[o];return this.__currentRuleSet__=null,!1}return!!this._signaled_error_token&&(r=this._signaled_error_token,this._signaled_error_token=!1,r)},next:function(){if(this.done)return this.clear(),this.EOF;this._input||(this.done=!0);var t,e,r,n;this._more||this.clear();var i=this.__currentRuleSet__;if(!i&&(i=this.__currentRuleSet__=this._currentRules(),!i||!i.rules)){var s=this.constructLexErrorInfo("Internal lexer engine error on line "+(this.yylineno+1)+'. The lex grammar programmer pushed a non-existing condition name "'+this.topState()+'"; this is a fatal error and should be reported to the application programmer team!\n',!1);return this.parseError(s.errStr,s,this.JisonLexerError)||this.ERROR}for(var o=i.rules,a=i.__rule_regexes,c=i.__rule_count,l=1;l<=c;l++)if(r=this._input.match(a[l]),r&&(!e||r[0].length>e[0].length)){if(e=r,n=l,this.options.backtrack_lexer){if(t=this.test_match(r,o[l]),t!==!1)return t;if(this._backtrack){e=void 0;continue}return!1}if(!this.options.flex)break}if(e)return t=this.test_match(e,o[n]),t!==!1&&t;if(""===this._input)return this.done=!0,this.EOF;var s=this.constructLexErrorInfo("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),this.options.lexer_errors_are_recoverable);return t=this.parseError(s.errStr,s,this.JisonLexerError)||this.ERROR,t===this.ERROR&&(this.match.length||this.input()),t},lex:function(){var t;for("function"==typeof this.options.pre_lex&&(t=this.options.pre_lex.call(this));!t;)t=this.next();return"function"==typeof this.options.post_lex&&(t=this.options.post_lex.call(this,t)||t),t},begin:function(t){return this.pushState(t)},pushState:function(t){return this.conditionStack.push(t),this.__currentRuleSet__=null,this},popState:function(){return this.conditionStack.length-1>0?(this.__currentRuleSet__=null,this.conditionStack.pop()):this.conditionStack[0]},topState:function(t){return t=this.conditionStack.length-1-Math.abs(t||0),t>=0?this.conditionStack[t]:"INITIAL"},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]]:this.conditions.INITIAL},stateStackSize:function(){return this.conditionStack.length},options:{},JisonLexerError:t,performAction:function(t,e,r,n){switch(r){case 0:break;case 23:return e.yytext=l(e.yytext.substr(1,e.yyleng-2)),23;case 24:return e.yytext=l(e.yytext.substr(1,e.yyleng-2)),26;case 25:return e.yytext=l(e.yytext),26;default:return this.simpleCaseActionClusters[r]}},simpleCaseActionClusters:{1:22,2:16,3:17,4:18,5:19,6:20,7:21,8:7,9:8,10:15,11:14,12:9,13:10,14:11,15:12,16:24,17:25,18:3,19:13,20:4,21:5,22:6,26:1,27:"INVALID"},rules:[/^(?:\s+)/,/^(?:(-)?\d+(\.\d+)?\b)/,/^(?:\|\|)/,/^(?:&&)/,/^(?:==)/,/^(?:!=)/,/^(?:<=)/,/^(?:>=)/,/^(?:<)/,/^(?:>)/,/^(?:\+\+)/,/^(?:--)/,/^(?:\+)/,/^(?:!)/,/^(?:\()/,/^(?:\))/,/^(?:true)/,/^(?:false)/,/^(?:,)/,/^(?:\.)/,/^(?:\[)/,/^(?:\])/,/^(?::)/,/^(?:(("(?:([^\n\r"\\]+)|(\\(?:(?:(?:["'\\bfnrtv])|(?:[^\d"'\\bfnrt-vx]))|(?:[x](?:[\dA-Fa-f]){2})|(?:[u](?:[\dA-Fa-f]){4}))))*")|('(?:([^\n\r'\\]+)|(\\(?:(?:(?:["'\\bfnrtv])|(?:[^\d"'\\bfnrt-vx]))|(?:[x](?:[\dA-Fa-f]){2})|(?:[u](?:[\dA-Fa-f]){4}))))*')))/,/^(?:((`(?:([^\n\r\\`]+)|(\\(?:(?:(?:["'\\bfnrtv])|(?:[^\d"'\\bfnrt-vx]))|(?:[x](?:[\dA-Fa-f]){2})|(?:[u](?:[\dA-Fa-f]){4}))))*`)))/,/^(?:((?:[$A-Z_a-z]|(\\(?:(?:(?:["'\\bfnrtv])|(?:[^\d"'\\bfnrt-vx]))|(?:[x](?:[\dA-Fa-f]){2})|(?:[u](?:[\dA-Fa-f]){4}))))(?:(?:[$A-Z_a-z]|(\\(?:(?:(?:["'\\bfnrtv])|(?:[^\d"'\\bfnrt-vx]))|(?:[x](?:[\dA-Fa-f]){2})|(?:[u](?:[\dA-Fa-f]){4}))))|\d)*))/,/^(?:$)/,/^(?:.)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27],inclusive:!0}}}}();return R.lexer=I,w.prototype=R,R.Parser=w,new w}();void 0!==t&&void 0!==r&&(r.parser=n,r.Parser=n.Parser,r.parse=function(){return n.parse.apply(n,arguments)})},{}],2:[function(t,e,r){"use strict";function n(t,e){this.value=t,this.name=e}function i(t){this.message='Unexpected characters "'+t[0]+'":\n'+t.input.replace(/\t|\n/g,".")+"\n"+new Array(t.index+1).join("-")+"^",this.name="ParseError"}function s(t){function e(){return h.createElement("TEMPLATE")}function r(t,e){g[t.nodeType](t,e)}function s(t,e){return E[t.nodeType](t,e),t}function u(t){if(t instanceof n){var r=t.name;if(m[r])return m[r];var i=e();i.innerHTML=t.value,r&&(i.id=r),t=i}else if("string"==typeof t){if(m[t])return m[t];t=h.querySelector("#"+t)}return this instanceof u?(t?(t.id&&(m[t.id]=this),this.node=p?t:t.cloneNode(!0),this.ready=!1):(void 0!==t&&(this.node=e()),this.ready=!0),this.closures={},this):new u(t)}t=t||{};var h=t.document||document,f=t.prefix||"bb-",p=void 0===t.destructive||!!t.destructive,y=o.map(function(t){return f+t}),_={};y.forEach(function(t,e){_[t]=o[e]});var d=f+"global",b="["+d+"]",v=f+"else",m={},g={};g[Node.ELEMENT_NODE]=function(t,n){function i(e,r){u=!0;var i=c.parse(r);a[_[f]]=n._addClosure(i),t.removeAttribute(f)}if(t.hasAttribute(y[4])&&"TEMPLATE"!=t.nodeName)if(t.hasAttribute(y[2])||t.hasAttribute(y[3]))t.removeAttribute(y[4]);else{var s=e();s.setAttribute(y[4],t.getAttribute(y[4])),t.removeAttribute(y[4]),[y[0],y[1]].forEach(function(e){t.hasAttribute(e)&&(s.setAttribute(e,t.getAttribute(e)),t.removeAttribute(e))}),t.hasAttribute(v)&&s.setAttribute(v,""),t.before(s),s.content.appendChild(t),t=s}var a={},u=!1;if(t.attributes.length>o.length)y.forEach(function(e){t.hasAttribute(e)&&i(e,t.getAttribute(e))});else for(var h=t.attributes.length-1;h>=0;h--){var f=t.attributes[h].name;f in _&&i(f,t.attributes[h].value)}u&&t.setAttribute(d,JSON.stringify(a)),"TEMPLATE"==t.nodeName?(r(t.content,n),t.hasAttribute(v)&&(u=!0),u||t.replaceWith(t.content)):l.call(t.childNodes).forEach(function(t){r(t,n)})},g[Node.TEXT_NODE]=function(){function n(t){return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}function s(t){return t.replace(l,function(){return arguments[1]})}function o(t){return t.replace(l,function(){return c[arguments[1]]})}var a=t.delimiters||["{","}"],c={"\\":"\\\\"};c[a[0]]=a[0],c[a[1]]=a[1];var l=new RegExp("\\\\("+["\\\\",n(a[0]),n(a[1])].join("|")+")","g"),u=["aaa((?:a|f|c|d|e|b(?:a|f|c|d|e|b(?:a|f|c|d|e)))*)bbb","aa((?:a|f|c|d|e|b(?:a|f|c|d|e))*)bb","((?:b|f|c|d|e|a(?:b|f|c|d|e))(?:b|f|c|d|e|a(?:b|f|c|d|e))*(?:a(?!a)|b|f|c|d|e||a(?:b|f|c|d|e))|(?:a(?!a)))","(.+)"],f={a:n(a[0]),b:n(a[1]),c:n("\\"+a[0]),d:n("\\"+a[1]),e:"[^"+n(a[0])+n(a[1])+"]",f:n("\\\\")},p=new RegExp(u.map(function(t){return"(?:"+t.replace(/a|b|c|d|e|f/g,function(){return f[arguments[0]]})+")"}).join("|"),"g");return function(t,n){for(var a,c;a=p.exec(t.nodeValue);)if(a[3])c=h.createTextNode(s(a[3])),t.before(c);else if(a[2])c=e(),c.setAttribute(y[2],o(a[2])),t.before(c),r(c,n);else{if(!a[1])throw new i(a);c=e(),c.setAttribute(y[3],o(a[1])),t.before(c),r(c,n)}t.remove()}}(),g[Node.COMMENT_NODE]=function(t,e){},g[Node.DOCUMENT_FRAGMENT_NODE]=function(t,e){l.call(t.childNodes).forEach(function(t){r(t,e)})};var E={};return E[Node.ELEMENT_NODE]=function(){var t;return function(r,n){var i,o=JSON.parse(r.getAttribute(d));r.removeAttribute(d);var c;if(o.if)if(c=n.closures[o.if](),r.nextElementSibling&&r.nextElementSibling.hasAttribute(v)){if(!c)return r.nextElementSibling.removeAttribute(v),r.remove();r.nextElementSibling.remove()}else if(!c)return r.remove();if(o.alias&&(c=n.closures[o.alias](),Array.isArray(c)||(c=[c]),i={},a.push(i),c.forEach(function(t){i[t.name]=t.value})),o.text)c=n.closures[o.text](),null!=c?r.replaceWith(c.toString()):r.remove();else if(o.html)c=n.closures[o.html](),null!=c?function(t){t.innerHTML=c.toString(),r.replaceWith(t.content)}(e()):r.remove();else if("TEMPLATE"==r.nodeName){if(o.repeat){i||(i={},a.push(i)),c=n.closures[o.repeat]();var l=c._order||"before";Array.isArray(c)||(c=[c]);var h=function(t){var e=n.closures[t];return e?function(){var t=u(e())._clone();r[l](s(t.node.content,t))}:function(){r[l](s(r.cloneNode(!0).content,n))}}(o.import);c.reduceRight(function(t,e){var r=e.name,n=e.value;return function(){n.forEach(function(e,s){i[r]=n[s],i["_"+r+"_"]=s,t()})}},h)()}else if(o.import){c=n.closures[o.import]();var f=u(c)._clone();r.before(s(f.node.content,f))}else r.before(s(r.content,n));r.remove()}else for(o.attr&&(c=n.closures[o.attr](),Array.isArray(c)||(c=[c]),c.forEach(function(t){var e=t.value,n=t.name&&t.name.toString();n&&null!=e&&r.setAttribute(n,e)})),o.class&&(c=n.closures[o.class](),Array.isArray(c)||(c=[c]),c.forEach(function(t){if(null!=t){var e=t.toString();e&&r.classList.add(e)}}));t=r.querySelector(b);)s(t,n);i&&a.pop()}}(),E[Node.DOCUMENT_FRAGMENT_NODE]=function(){var t;return function(e,r){for(;t=e.querySelector(b);)s(t,r)}}(),u.bbObj=function(t,e){return new n(t,e)},u.clean=function(t){if(t)delete m[t];else for(var e in m)delete m[e]},u.prototype.merge=function(){for(var t=this._clone(),e=new Array(arguments.length),r=0;r<e.length;++r)e[r]=arguments[r];return a.init(e),s(t.node.content,t),a.init(),t.node.content},u.prototype._addClosure=function(){var t=0;return function(e){var r="fun"+ ++t;return this.closures[r]=e,r}}(),u.prototype._compile=function(){return r(this.node.content,this),this.ready=!0,this},u.prototype._clone=function(){this.ready||this._compile();var t=new u;return t.node=this.node.cloneNode(!0),t.closures=this.closures,t},u}var o=["if","alias","text","html","repeat","import","attr","class"],a={stack:[],resolve:function(t){for(var e,r=this.stack.length-1;void 0===e&&r>=0;)e=this.stack[r][t],r--;return void 0===e?window[t]:e},init:function(t){this.stack=t||[]},push:function(t){this.stack.push(t)},pop:function(){this.stack.pop()}};n.prototype.toString=function(){return this.value&&null!=this.name?this.name.toString():""};var c=t("../parser.js");c.parser.yy.context=a,c.parser.yy.BBObj=n;var l=Array.prototype.slice;e.exports=s},{"../parser.js":1}]},{},[2])(2)});